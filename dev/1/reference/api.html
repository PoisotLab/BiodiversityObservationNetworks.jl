<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Public API | SpeciesInteractionSamplers.jl</title>
    <meta name="description" content="Documentation for BiodiversityObservationNetworks.jl">
    <meta name="generator" content="VitePress v1.6.4">
    <link rel="preload stylesheet" href="/BiodiversityObservationNetworks.jl/dev/assets/style.4l_sQWPe.css" as="style">
    <link rel="preload stylesheet" href="/BiodiversityObservationNetworks.jl/dev/vp-icons.css" as="style">
    
    <script type="module" src="/BiodiversityObservationNetworks.jl/dev/assets/app.D0qHcQIK.js"></script>
    <link rel="preload" href="/BiodiversityObservationNetworks.jl/dev/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/BiodiversityObservationNetworks.jl/dev/assets/chunks/theme.BIsX5Dz_.js">
    <link rel="modulepreload" href="/BiodiversityObservationNetworks.jl/dev/assets/chunks/framework.CUy-DHUw.js">
    <link rel="modulepreload" href="/BiodiversityObservationNetworks.jl/dev/assets/reference_api.md.CNIoeKOY.lean.js">
    <link rel="icon" href="REPLACE_ME_DOCUMENTER_VITEPRESS_FAVICON">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-a9a9e638><!--[--><!--]--><!--[--><span tabindex="-1" data-v-492508fc></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-492508fc>Skip to content</a><!--]--><!----><header class="VPNav" data-v-a9a9e638 data-v-f1e365da><div class="VPNavBar" data-v-f1e365da data-v-822684d1><div class="wrapper" data-v-822684d1><div class="container" data-v-822684d1><div class="title" data-v-822684d1><div class="VPNavBarTitle has-sidebar" data-v-822684d1 data-v-0f4f798b><a class="title" href="/BiodiversityObservationNetworks.jl/dev/" data-v-0f4f798b><!--[--><!--]--><!--[--><img class="VPImage logo" src="/BiodiversityObservationNetworks.jl/dev/logo.png" width="24" height="24" alt data-v-35a7d0b8><!--]--><span data-v-0f4f798b>BONs.jl</span><!--[--><!--]--></a></div></div><div class="content" data-v-822684d1><div class="content-body" data-v-822684d1><!--[--><!--]--><div class="VPNavBarSearch search" data-v-822684d1><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-822684d1 data-v-e6d46098><span id="main-nav-aria-label" class="visually-hidden" data-v-e6d46098> Main Navigation </span><!--[--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-e6d46098 data-v-04f5c5e9><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-04f5c5e9><span class="text" data-v-04f5c5e9><!----><span data-v-04f5c5e9>Tutorials</span><span class="vpi-chevron-down text-icon" data-v-04f5c5e9></span></span></button><div class="menu" data-v-04f5c5e9><div class="VPMenu" data-v-04f5c5e9 data-v-7dd3104a><div class="items" data-v-7dd3104a><!--[--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-acbfed09><a class="VPLink link" href="/BiodiversityObservationNetworks.jl/dev/tutorials/gettingstarted" data-v-acbfed09><!--[--><span data-v-acbfed09>Getting Started with BONs.jl</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-acbfed09><a class="VPLink link" href="/BiodiversityObservationNetworks.jl/dev/tutorials/multistage" data-v-acbfed09><!--[--><span data-v-acbfed09>Building Multistage Samplers</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-acbfed09><a class="VPLink link" href="/BiodiversityObservationNetworks.jl/dev/tutorials/spatialbalance" data-v-acbfed09><!--[--><span data-v-acbfed09>Measuring Spatial Balance</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-acbfed09><a class="VPLink link" href="/BiodiversityObservationNetworks.jl/dev/tutorials/envdistance" data-v-acbfed09><!--[--><span data-v-acbfed09>Measuring Environmental Representativeness</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-acbfed09><a class="VPLink link" href="/BiodiversityObservationNetworks.jl/dev/tutorials/canbon" data-v-acbfed09><!--[--><span data-v-acbfed09>Designing a National BON</span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/BiodiversityObservationNetworks.jl/dev/howto" tabindex="0" data-v-e6d46098 data-v-956ec74c><!--[--><span data-v-956ec74c>How-to</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup active" data-v-e6d46098 data-v-04f5c5e9><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-04f5c5e9><span class="text" data-v-04f5c5e9><!----><span data-v-04f5c5e9>Reference</span><span class="vpi-chevron-down text-icon" data-v-04f5c5e9></span></span></button><div class="menu" data-v-04f5c5e9><div class="VPMenu" data-v-04f5c5e9 data-v-7dd3104a><div class="items" data-v-7dd3104a><!--[--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-acbfed09><a class="VPLink link" href="/BiodiversityObservationNetworks.jl/dev/reference/samplers" data-v-acbfed09><!--[--><span data-v-acbfed09>Samplers</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-acbfed09><a class="VPLink link" href="/BiodiversityObservationNetworks.jl/dev/reference/utilities" data-v-acbfed09><!--[--><span data-v-acbfed09>Utilities</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-7dd3104a data-v-acbfed09><a class="VPLink link active" href="/BiodiversityObservationNetworks.jl/dev/reference/api" data-v-acbfed09><!--[--><span data-v-acbfed09>API Reference</span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-822684d1 data-v-af096f4a><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-af096f4a data-v-e40a8bb6 data-v-4a1c76db><span class="check" data-v-4a1c76db><span class="icon" data-v-4a1c76db><!--[--><span class="vpi-sun sun" data-v-e40a8bb6></span><span class="vpi-moon moon" data-v-e40a8bb6></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-822684d1 data-v-164c457f data-v-ee7a9424><!--[--><a class="VPSocialLink no-icon" href="https://github.com/PoisotLab/BiodiversityObservationNetworks.jl" aria-label="github" target="_blank" rel="noopener" data-v-ee7a9424 data-v-d26d30cb><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-822684d1 data-v-925effce data-v-04f5c5e9><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-04f5c5e9><span class="vpi-more-horizontal icon" data-v-04f5c5e9></span></button><div class="menu" data-v-04f5c5e9><div class="VPMenu" data-v-04f5c5e9 data-v-7dd3104a><!----><!--[--><!--[--><!----><div class="group" data-v-925effce><div class="item appearance" data-v-925effce><p class="label" data-v-925effce>Appearance</p><div class="appearance-action" data-v-925effce><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-925effce data-v-e40a8bb6 data-v-4a1c76db><span class="check" data-v-4a1c76db><span class="icon" data-v-4a1c76db><!--[--><span class="vpi-sun sun" data-v-e40a8bb6></span><span class="vpi-moon moon" data-v-e40a8bb6></span><!--]--></span></span></button></div></div></div><div class="group" data-v-925effce><div class="item social-links" data-v-925effce><div class="VPSocialLinks social-links-list" data-v-925effce data-v-ee7a9424><!--[--><a class="VPSocialLink no-icon" href="https://github.com/PoisotLab/BiodiversityObservationNetworks.jl" aria-label="github" target="_blank" rel="noopener" data-v-ee7a9424 data-v-d26d30cb><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-822684d1 data-v-5dea55bf><span class="container" data-v-5dea55bf><span class="top" data-v-5dea55bf></span><span class="middle" data-v-5dea55bf></span><span class="bottom" data-v-5dea55bf></span></span></button></div></div></div></div><div class="divider" data-v-822684d1><div class="divider-line" data-v-822684d1></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-a9a9e638 data-v-070ab83d><div class="container" data-v-070ab83d><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-070ab83d><span class="vpi-align-left menu-icon" data-v-070ab83d></span><span class="menu-text" data-v-070ab83d>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-070ab83d data-v-168ddf5d><button data-v-168ddf5d>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-a9a9e638 data-v-18756405><div class="curtain" data-v-18756405></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-18756405><span class="visually-hidden" id="sidebar-aria-label" data-v-18756405> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-9e426adc><section class="VPSidebarItem level-0 collapsible" data-v-9e426adc data-v-a4b0d9bf><div class="item" role="button" tabindex="0" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><h2 class="text" data-v-a4b0d9bf>Samplers</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-a4b0d9bf><span class="vpi-chevron-right caret-icon" data-v-a4b0d9bf></span></div></div><div class="items" data-v-a4b0d9bf><!--[--><div class="VPSidebarItem level-1 is-link" data-v-a4b0d9bf data-v-a4b0d9bf><div class="item" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><a class="VPLink link link" href="/BiodiversityObservationNetworks.jl/dev/reference/samplers/simplerandom" data-v-a4b0d9bf><!--[--><p class="text" data-v-a4b0d9bf>Simple Random Sampling</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4b0d9bf data-v-a4b0d9bf><div class="item" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><a class="VPLink link link" href="/BiodiversityObservationNetworks.jl/dev/reference/samplers/balancedacceptance" data-v-a4b0d9bf><!--[--><p class="text" data-v-a4b0d9bf>Balanced Acceptance Sampling</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4b0d9bf data-v-a4b0d9bf><div class="item" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><a class="VPLink link link" href="/BiodiversityObservationNetworks.jl/dev/reference/samplers/grts" data-v-a4b0d9bf><!--[--><p class="text" data-v-a4b0d9bf>Generalized Random Tessellated Stratified Sampling</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4b0d9bf data-v-a4b0d9bf><div class="item" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><a class="VPLink link link" href="/BiodiversityObservationNetworks.jl/dev/reference/samplers/cube" data-v-a4b0d9bf><!--[--><p class="text" data-v-a4b0d9bf>Cube Sampling</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4b0d9bf data-v-a4b0d9bf><div class="item" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><a class="VPLink link link" href="/BiodiversityObservationNetworks.jl/dev/reference/samplers/adaptivehotspot" data-v-a4b0d9bf><!--[--><p class="text" data-v-a4b0d9bf>Adaptive Hotspot Detection</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-9e426adc><section class="VPSidebarItem level-0 collapsible" data-v-9e426adc data-v-a4b0d9bf><div class="item" role="button" tabindex="0" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><h2 class="text" data-v-a4b0d9bf>Utilities</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-a4b0d9bf><span class="vpi-chevron-right caret-icon" data-v-a4b0d9bf></span></div></div><div class="items" data-v-a4b0d9bf><!--[--><div class="VPSidebarItem level-1 is-link" data-v-a4b0d9bf data-v-a4b0d9bf><div class="item" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><a class="VPLink link link" href="/BiodiversityObservationNetworks.jl/dev/reference/utilities/spatialbalance" data-v-a4b0d9bf><!--[--><p class="text" data-v-a4b0d9bf>Spatial Balance</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4b0d9bf data-v-a4b0d9bf><div class="item" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><a class="VPLink link link" href="/BiodiversityObservationNetworks.jl/dev/reference/utilities/envdistance" data-v-a4b0d9bf><!--[--><p class="text" data-v-a4b0d9bf>Environmental Distance</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4b0d9bf data-v-a4b0d9bf><div class="item" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><a class="VPLink link link" href="/BiodiversityObservationNetworks.jl/dev/reference/utilities/rarity" data-v-a4b0d9bf><!--[--><p class="text" data-v-a4b0d9bf>Climate Rarity</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a4b0d9bf data-v-a4b0d9bf><div class="item" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><a class="VPLink link link" href="/BiodiversityObservationNetworks.jl/dev/reference/utilities/velocity" data-v-a4b0d9bf><!--[--><p class="text" data-v-a4b0d9bf>Climate Velocity</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-9e426adc><section class="VPSidebarItem level-0 has-active" data-v-9e426adc data-v-a4b0d9bf><!----><div class="items" data-v-a4b0d9bf><!--[--><div class="VPSidebarItem level-1 is-link" data-v-a4b0d9bf data-v-a4b0d9bf><div class="item" data-v-a4b0d9bf><div class="indicator" data-v-a4b0d9bf></div><a class="VPLink link link" href="/BiodiversityObservationNetworks.jl/dev/reference/api" data-v-a4b0d9bf><!--[--><p class="text" data-v-a4b0d9bf>Full API</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-a9a9e638 data-v-91765379><div class="VPDoc has-sidebar has-aside" data-v-91765379 data-v-83890dd9><!--[--><!--]--><div class="container" data-v-83890dd9><div class="aside" data-v-83890dd9><div class="aside-curtain" data-v-83890dd9></div><div class="aside-container" data-v-83890dd9><div class="aside-content" data-v-83890dd9><div class="VPDocAside" data-v-83890dd9 data-v-6d7b3c46><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-6d7b3c46 data-v-b38bf2ff><div class="content" data-v-b38bf2ff><div class="outline-marker" data-v-b38bf2ff></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-b38bf2ff>On this page</div><ul class="VPDocOutlineItem root" data-v-b38bf2ff data-v-3f927ebe><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-6d7b3c46></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-83890dd9><div class="content-container" data-v-83890dd9><!--[--><!--]--><main class="main" data-v-83890dd9><div style="position:relative;" class="vp-doc _BiodiversityObservationNetworks_jl_dev_reference_api" data-v-83890dd9><div><h1 id="Public-API" tabindex="-1">Public API <a class="header-anchor" href="#Public-API" aria-label="Permalink to &quot;Public API {#Public-API}&quot;">​</a></h1><details class="jldocstring custom-block" open><summary><a id="BiodiversityObservationNetworks.AdaptiveHotspot" href="#BiodiversityObservationNetworks.AdaptiveHotspot"><span class="jlbinding">BiodiversityObservationNetworks.AdaptiveHotspot</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">AdaptiveHotspot{I</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> F} </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">&lt;:</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;"> BONSampler</span></span></code></pre></div><p>Implements Adaptive Hotspot Sampling for high-uncertainty or high-value targets.</p><p><strong>Fields</strong></p><ul><li><p><code>num_nodes::I</code>: Number of sites.</p></li><li><p><code>scale::F</code>: Range parameter (ρ) of the Matérn covariance kernel.</p></li><li><p><code>smoothness::F</code>: Smoothness parameter (ν) of the Matérn covariance kernel.</p></li></ul><p><strong>Description</strong></p><p>Starts at the global maximum of the target/uncertainty surface. Subsequent points are chosen to maximize a trade-off between the target value and spatial diversity (measured via the determinant of a kernel matrix).</p><p><strong>References</strong></p><ul><li>Andrade-Pacheco, R., et al. (2020) Finding hotspots...</li></ul><span class="VPBadge info source-link"><!--[--><a href="https://github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/b17536d1f181b8ce5ffb2c19c55dfb67194fd4a8/src/samplers/adaptivehotspot.jl#L1-L18" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="BiodiversityObservationNetworks.BONSampler" href="#BiodiversityObservationNetworks.BONSampler"><span class="jlbinding">BiodiversityObservationNetworks.BONSampler</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">BONSampler</span></span></code></pre></div><span class="VPBadge info source-link"><!--[--><a href="https://github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/b17536d1f181b8ce5ffb2c19c55dfb67194fd4a8/src/BiodiversityObservationNetworks.jl#L23-L25" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="BiodiversityObservationNetworks.BalancedAcceptance" href="#BiodiversityObservationNetworks.BalancedAcceptance"><span class="jlbinding">BiodiversityObservationNetworks.BalancedAcceptance</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">BalancedAcceptance </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">&lt;:</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;"> BONSampler</span></span></code></pre></div><p>Implements Balanced Acceptance Sampling (BAS) using Halton sequences.</p><p><strong>Fields</strong></p><ul><li><code>num_nodes::Int</code>: The number of sites to select.</li></ul><p><strong>Description</strong></p><p>BAS generates spatially balanced samples by mapping the domain to a Halton sequence. If <code>inclusion</code> probabilities are provided, it uses a 3D Halton sequence where the third dimension acts as an acceptance threshold against the probability surface.</p><p><strong>References</strong></p><ul><li>Robertson, B. L., et al. (2013).</li></ul><span class="VPBadge info source-link"><!--[--><a href="https://github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/b17536d1f181b8ce5ffb2c19c55dfb67194fd4a8/src/samplers/balancedacceptance.jl#L1-L16" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="BiodiversityObservationNetworks.BiodiversityObservationNetwork" href="#BiodiversityObservationNetworks.BiodiversityObservationNetwork"><span class="jlbinding">BiodiversityObservationNetworks.BiodiversityObservationNetwork</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">BiodiversityObservationNetwork{N</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> D}</span></span></code></pre></div><p>Represents the selected sampling sites and their associated data.</p><p><strong>Fields</strong></p><ul><li><p><code>nodes::N</code>: The coordinates or indices of the selected sites.</p></li><li><p><code>auxiliary::Matrix</code>: The underlying feature matrix associated with the nodes.</p></li></ul><span class="VPBadge info source-link"><!--[--><a href="https://github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/b17536d1f181b8ce5ffb2c19c55dfb67194fd4a8/src/domains/bon.jl#L1-L9" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="BiodiversityObservationNetworks.CubeSampling" href="#BiodiversityObservationNetworks.CubeSampling"><span class="jlbinding">BiodiversityObservationNetworks.CubeSampling</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">CubeSampling </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">&lt;:</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;"> BONSampler</span></span></code></pre></div><p>Implements the Cube method for balanced sampling with respect to auxiliary variables.</p><p><strong>Fields</strong></p><ul><li><code>num_nodes::Int</code>: The expected sample size.</li></ul><p><strong>Description</strong></p><p>The algorithm selects a sample such that the Horvitz-Thompson estimates of auxiliary variables match the population totals as closely as possible. It proceeds in two phases:</p><ol><li><p><strong>Flight Phase</strong>: Random walk modifying inclusion probabilities while respecting constraints.</p></li><li><p><strong>Landing Phase</strong>: Linear programming (using HiGHS) to resolve remaining fractional probabilities.</p></li></ol><p><strong>References</strong></p><ul><li>Deville, J. C., &amp; Tillé, Y. (2004). Efficient balanced sampling: The cube method.</li></ul><span class="VPBadge info source-link"><!--[--><a href="https://github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/b17536d1f181b8ce5ffb2c19c55dfb67194fd4a8/src/samplers/cubesampling.jl#L1-L17" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="BiodiversityObservationNetworks.DistanceToMedian" href="#BiodiversityObservationNetworks.DistanceToMedian"><span class="jlbinding">BiodiversityObservationNetworks.DistanceToMedian</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">DistanceToMedian</span></span></code></pre></div><p>Rarity score defined as Euclidean distance in feature space to the per-feature median across the raster stack. Optionally, features can be PCA-transformed prior to z-scoring.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/b17536d1f181b8ce5ffb2c19c55dfb67194fd4a8/src/utilities/rarity.jl#L26-L32" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="BiodiversityObservationNetworks.GeneralizedRandomTesselated" href="#BiodiversityObservationNetworks.GeneralizedRandomTesselated"><span class="jlbinding">BiodiversityObservationNetworks.GeneralizedRandomTesselated</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">GeneralizedRandomTesselated</span></span></code></pre></div><p><code>GeneralizedRandomTesselated</code> is a type of <a href="/BiodiversityObservationNetworks.jl/dev/reference/api#BiodiversityObservationNetworks.BONSampler"><code>BONSampler</code></a> for generating <a href="/BiodiversityObservationNetworks.jl/dev/reference/api#BiodiversityObservationNetworks.BiodiversityObservationNetwork"><code>BiodiversityObservationNetwork</code></a>s with spatial spreading.</p><p>GRTS was initially proposed in (<a href="/BiodiversityObservationNetworks.jl/dev/bibliography#Stevens2004SpaBal">Stevens and Olsen, 2022</a>).</p><p><em>Arguments</em>:</p><ul><li><p><code>num_nodes</code>: the number of sites to select</p></li><li><p><code>grid_size</code>: if being used on a polygon, the dimensions of the grid used to cover the extent. GRTS sampling uses discrete Cartesian indices</p></li></ul><p>GRTS represents each cell of a rasterized version of the sampling domain using an address, where the address of each cell is represented as a <code>D</code>-digit base-4 number.</p><p>The value of <code>D</code> depends on the size of the raster. GRTS works by recursively splitting the rasterized domain into quadrants, and those quadrants into further quadrants, until a single pixel is reached. At each step, each quadrant is randomly labeled with a number 1, 2, 3, or 4 (without replacement, so all values are used).</p><p>The addresses are then sorted numerically, and the <code>num_nodes</code> smallest values are chosen.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/b17536d1f181b8ce5ffb2c19c55dfb67194fd4a8/src/samplers/grts.jl#L1-L28" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="BiodiversityObservationNetworks.MoransI" href="#BiodiversityObservationNetworks.MoransI"><span class="jlbinding">BiodiversityObservationNetworks.MoransI</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">MoransI </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">&lt;:</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;"> SpatialBalanceMetric</span></span></code></pre></div><p>Computes Moran&#39;s I on the inclusion indicator variable.</p><p><strong>Description</strong></p><p>Calculates spatial autocorrelation of the sample indicator <mjx-container class="MathJax" jax="SVG" style="direction:ltr;position:relative;"><svg style="overflow:visible;min-height:1px;min-width:1px;vertical-align:-0.023ex;" xmlns="http://www.w3.org/2000/svg" width="1.005ex" height="1.645ex" role="img" focusable="false" viewBox="0 -717 444 727" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D6FF" d="M195 609Q195 656 227 686T302 717Q319 716 351 709T407 697T433 690Q451 682 451 662Q451 644 438 628T403 612Q382 612 348 641T288 671T249 657T235 628Q235 584 334 463Q401 379 401 292Q401 169 340 80T205 -10H198Q127 -10 83 36T36 153Q36 286 151 382Q191 413 252 434Q252 435 245 449T230 481T214 521T201 566T195 609ZM112 130Q112 83 136 55T204 27Q233 27 256 51T291 111T309 178T316 232Q316 267 309 298T295 344T269 400L259 396Q215 381 183 342T137 256T118 179T112 130Z" style="stroke-width:3;"></path></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline" style="top:0px;left:0px;clip:rect(1px, 1px, 1px, 1px);-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:absolute;padding:1px 0px 0px 0px;border:0px;display:block;width:auto;overflow:hidden;"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>δ</mi></math></mjx-assistive-mml></mjx-container> (1 if sampled, 0 otherwise). Negative values indicate spatial inhibition (spread), which is desired for balanced sampling.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/b17536d1f181b8ce5ffb2c19c55dfb67194fd4a8/src/utilities/spatialbalance.jl#L17-L25" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="BiodiversityObservationNetworks.MultivariateEnvironmentalSimilarity" href="#BiodiversityObservationNetworks.MultivariateEnvironmentalSimilarity"><span class="jlbinding">BiodiversityObservationNetworks.MultivariateEnvironmentalSimilarity</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">MultivariateEnvironmentalSimilarity</span></span></code></pre></div><p>Multivariate Environmental Similarity Surface (MESS). For each cell, compute the minimum over features of a per-feature similarity score derived from the ECDF of the training distribution, following the standard MESS definition.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/b17536d1f181b8ce5ffb2c19c55dfb67194fd4a8/src/utilities/rarity.jl#L56-L62" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="BiodiversityObservationNetworks.Pivotal" href="#BiodiversityObservationNetworks.Pivotal"><span class="jlbinding">BiodiversityObservationNetworks.Pivotal</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">Pivotal </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">&lt;:</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;"> BONSampler</span></span></code></pre></div><p>Implements the Local Pivotal Method (LPM).</p><p><strong>Fields</strong></p><ul><li><code>num_nodes::Int</code>: The number of sites to select.</li></ul><p><strong>Description</strong></p><p>Iteratively pairs nearby units and updates their inclusion probabilities so that, locally, one unit tends toward selection while the other tends toward non-selection. Repeating this over the domain produces a sample that is more spatially balanced than simple random sampling, while respecting per-unit inclusion probabilities when provided.</p><p>High-level algorithm:</p><ul><li><p>Select an unfinished unit <code>i</code>; then choose its nearest unfinished neighbor <code>j</code>.</p></li><li><p>If <code>πᵢ + πⱼ &lt; 1</code>, move probability mass so one unit goes to 0 and the other to <code>πᵢ+πⱼ</code>.</p></li><li><p>Otherwise (if <code>πᵢ + πⱼ ≥ 1</code>), move probability mass so one unit is selected and the other retains the leftover probability <code>πᵢ + πⱼ - 1</code>.</p></li><li><p>Repeat until all are complete.</p></li></ul><p><strong>References</strong></p><ul><li>Grafström, A. (2012).</li></ul><span class="VPBadge info source-link"><!--[--><a href="https://github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/b17536d1f181b8ce5ffb2c19c55dfb67194fd4a8/src/samplers/pivotal.jl#L1-L24" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="BiodiversityObservationNetworks.PolygonDomain" href="#BiodiversityObservationNetworks.PolygonDomain"><span class="jlbinding">BiodiversityObservationNetworks.PolygonDomain</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">PolygonDomain{T} </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">&lt;:</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;"> AbstractDomain</span></span></code></pre></div><p>A domain defined by a vector geometry (polygon).</p><p><strong>Fields</strong></p><ul><li><code>data::T</code>: The underlying geometry object.</li></ul><span class="VPBadge info source-link"><!--[--><a href="https://github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/b17536d1f181b8ce5ffb2c19c55dfb67194fd4a8/src/domains/polygon.jl#L1-L8" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="BiodiversityObservationNetworks.RasterDomain" href="#BiodiversityObservationNetworks.RasterDomain"><span class="jlbinding">BiodiversityObservationNetworks.RasterDomain</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">RasterDomain{T</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> P} </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">&lt;:</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;"> AbstractDomain</span></span></code></pre></div><p>A wrapper around a raster-like object (Matrix or SDMLayer) that maintains a &quot;pool&quot; of valid sampling indices.</p><p><strong>Fields</strong></p><ul><li><p><code>data::T</code>: The underlying raster data (e.g., <code>Matrix</code> or <code>SDMLayer</code>).</p></li><li><p><code>pool::P</code>: A collection of valid indices that can be sampled.</p></li></ul><span class="VPBadge info source-link"><!--[--><a href="https://github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/b17536d1f181b8ce5ffb2c19c55dfb67194fd4a8/src/domains/raster.jl#L1-L10" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="BiodiversityObservationNetworks.RasterStack" href="#BiodiversityObservationNetworks.RasterStack"><span class="jlbinding">BiodiversityObservationNetworks.RasterStack</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">RasterStack{T} </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">&lt;:</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;"> AbstractDomain</span></span></code></pre></div><p>A collection of aligned <code>RasterDomain</code>s, used when sampling requires multivariate features.</p><p><strong>Fields</strong></p><ul><li><p><code>rasters::Vector{&lt;:RasterDomain{&lt;:T}}</code>: The stack of layers.</p></li><li><p><code>pool</code>: The intersection of valid pools from all layers.</p></li></ul><span class="VPBadge info source-link"><!--[--><a href="https://github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/b17536d1f181b8ce5ffb2c19c55dfb67194fd4a8/src/domains/stack.jl#L1-L9" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="BiodiversityObservationNetworks.SimpleRandom" href="#BiodiversityObservationNetworks.SimpleRandom"><span class="jlbinding">BiodiversityObservationNetworks.SimpleRandom</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">SimpleRandom </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">&lt;:</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;"> BONSampler</span></span></code></pre></div><p>Implements simple random sampling (SRS) and weighted random sampling.</p><p><strong>Fields</strong></p><ul><li><code>num_nodes::Int</code>: The number of sites to select.</li></ul><p><strong>Description</strong></p><p>Selects <code>num_nodes</code> locations from the domain uniformly at random without replacement. If an <code>inclusion</code> probability surface is provided, it performs weighted random sampling without replacement, where the weight of each candidate cell is proportional to its inclusion probability.</p><p><strong>Notes</strong></p><p>While computationally efficient, Simple Random Sampling does not guarantee spatial balance and may result in clustering of sampling points.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/b17536d1f181b8ce5ffb2c19c55dfb67194fd4a8/src/samplers/simplerandom.jl#L1-L18" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="BiodiversityObservationNetworks.SpatiallyCorrelatedPoisson" href="#BiodiversityObservationNetworks.SpatiallyCorrelatedPoisson"><span class="jlbinding">BiodiversityObservationNetworks.SpatiallyCorrelatedPoisson</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">SpatiallyCorrelatedPoisson </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">&lt;:</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;"> BONSampler</span></span></code></pre></div><p>Implements Spatially Correlated Poisson Sampling (SCPS).</p><p><strong>Fields</strong></p><ul><li><code>num_nodes::Int</code>: The number of sites to select.</li></ul><p><strong>Description</strong></p><p>Iterates through units, selecting them based on inclusion probabilities, and dynamically adjusting the probabilities of neighboring units to maintain spatial balance.</p><p><strong>References</strong></p><ul><li>Grafström, A. (2012). Spatially correlated Poisson sampling.</li></ul><span class="VPBadge info source-link"><!--[--><a href="https://github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/b17536d1f181b8ce5ffb2c19c55dfb67194fd4a8/src/samplers/spatiallycorrelatedpoisson.jl#L1-L15" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="BiodiversityObservationNetworks.SpatiallyStratified" href="#BiodiversityObservationNetworks.SpatiallyStratified"><span class="jlbinding">BiodiversityObservationNetworks.SpatiallyStratified</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">SpatiallyStratified</span></span></code></pre></div><p><code>SpatiallyStratified</code> performs stratified random sampling over discrete categories present in the domain. Each pool element belongs to a stratum given by <code>domain[x]</code>. The number of draws allocated to each stratum is proportional to the stratum size (via the multinomial distribution), and units are then sampled without replacement from each stratum.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/b17536d1f181b8ce5ffb2c19c55dfb67194fd4a8/src/samplers/stratified.jl#L1-L8" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="BiodiversityObservationNetworks.VoronoiVariance" href="#BiodiversityObservationNetworks.VoronoiVariance"><span class="jlbinding">BiodiversityObservationNetworks.VoronoiVariance</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">VoronoiVariance</span></span></code></pre></div><p>The <code>VoronoiVariance</code> method for characterizing the spatial balance of a sample is based on the initial method proposed by (<a href="/BiodiversityObservationNetworks.jl/dev/bibliography#Stevens2004SpaBal">Stevens and Olsen, 2022</a>), and then extended by (<a href="/BiodiversityObservationNetworks.jl/dev/bibliography#Grafstrom2012SpaCor">Grafström, 2025</a>).</p><p>For a given <a href="/BiodiversityObservationNetworks.jl/dev/reference/api#BiodiversityObservationNetworks.BiodiversityObservationNetwork"><code>BiodiversityObservationNetwork</code></a> <code>bon</code>, the <a href="https://en.wikipedia.org/wiki/Voronoi_diagram" target="_blank" rel="noreferrer">Voronoi tesselation</a> splits the plane into a series of polygons, where the <code>i</code>-th polygon consists of all points in the plane whose nearest node in <code>bon</code> is the <code>i</code>-th node.</p><p>These polygons can then be used to assess the spatial balance of a sample.</p><p>In an <em>ideally</em> balanced sample, the sum of the inclusion probabilities across each polygon <code>i</code> would equal 1, because in expectation exactly one unit would be sampled in that region.</p><p>If we define <mjx-container class="MathJax" jax="SVG" style="direction:ltr;position:relative;"><svg style="overflow:visible;min-height:1px;min-width:1px;vertical-align:-0.357ex;" xmlns="http://www.w3.org/2000/svg" width="1.837ex" height="1.359ex" role="img" focusable="false" viewBox="0 -443 812 600.8" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D463" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z" style="stroke-width:3;"></path></g><g data-mml-node="mi" transform="translate(518,-150) scale(0.707)"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z" style="stroke-width:3;"></path></g></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline" style="top:0px;left:0px;clip:rect(1px, 1px, 1px, 1px);-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:absolute;padding:1px 0px 0px 0px;border:0px;display:block;width:auto;overflow:hidden;"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>v</mi><mi>i</mi></msub></math></mjx-assistive-mml></mjx-container> as the total inclusion probability across all elements of the population in Voronoi polygon <code>i</code>, i.e.</p><mjx-container class="MathJax" jax="SVG" display="true" style="direction:ltr;display:block;text-align:center;margin:1em 0;position:relative;"><svg style="overflow:visible;min-height:1px;min-width:1px;vertical-align:-3.006ex;" xmlns="http://www.w3.org/2000/svg" width="10.635ex" height="5.155ex" role="img" focusable="false" viewBox="0 -950 4700.5 2278.6" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D463" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z" style="stroke-width:3;"></path></g><g data-mml-node="mi" transform="translate(518,-150) scale(0.707)"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z" style="stroke-width:3;"></path></g></g><g data-mml-node="mo" transform="translate(1089.7,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z" style="stroke-width:3;"></path></g><g data-mml-node="munder" transform="translate(2145.5,0)"><g data-mml-node="mo"><path data-c="2211" d="M60 948Q63 950 665 950H1267L1325 815Q1384 677 1388 669H1348L1341 683Q1320 724 1285 761Q1235 809 1174 838T1033 881T882 898T699 902H574H543H251L259 891Q722 258 724 252Q725 250 724 246Q721 243 460 -56L196 -356Q196 -357 407 -357Q459 -357 548 -357T676 -358Q812 -358 896 -353T1063 -332T1204 -283T1307 -196Q1328 -170 1348 -124H1388Q1388 -125 1381 -145T1356 -210T1325 -294L1267 -449L666 -450Q64 -450 61 -448Q55 -446 55 -439Q55 -437 57 -433L590 177Q590 178 557 222T452 366T322 544L56 909L55 924Q55 945 60 948Z" style="stroke-width:3;"></path></g><g data-mml-node="TeXAtom" transform="translate(218.5,-1084.4) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D457" d="M297 596Q297 627 318 644T361 661Q378 661 389 651T403 623Q403 595 384 576T340 557Q322 557 310 567T297 596ZM288 376Q288 405 262 405Q240 405 220 393T185 362T161 325T144 293L137 279Q135 278 121 278H107Q101 284 101 286T105 299Q126 348 164 391T252 441Q253 441 260 441T272 442Q296 441 316 432Q341 418 354 401T367 348V332L318 133Q267 -67 264 -75Q246 -125 194 -164T75 -204Q25 -204 7 -183T-12 -137Q-12 -110 7 -91T53 -71Q70 -71 82 -81T95 -112Q95 -148 63 -167Q69 -168 77 -168Q111 -168 139 -140T182 -74L193 -32Q204 11 219 72T251 197T278 308T289 365Q289 372 288 376Z" style="stroke-width:3;"></path></g><g data-mml-node="mo" transform="translate(412,0)"><path data-c="2208" d="M84 250Q84 372 166 450T360 539Q361 539 377 539T419 540T469 540H568Q583 532 583 520Q583 511 570 501L466 500Q355 499 329 494Q280 482 242 458T183 409T147 354T129 306T124 272V270H568Q583 262 583 250T568 230H124V228Q124 207 134 177T167 112T231 48T328 7Q355 1 466 0H570Q583 -10 583 -20Q583 -32 568 -40H471Q464 -40 446 -40T417 -41Q262 -41 172 45Q84 127 84 250Z" style="stroke-width:3;"></path></g><g data-mml-node="mi" transform="translate(1079,0)"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z" style="stroke-width:3;"></path></g></g></g><g data-mml-node="msub" transform="translate(3756.2,0)"><g data-mml-node="mi"><path data-c="1D70B" d="M132 -11Q98 -11 98 22V33L111 61Q186 219 220 334L228 358H196Q158 358 142 355T103 336Q92 329 81 318T62 297T53 285Q51 284 38 284Q19 284 19 294Q19 300 38 329T93 391T164 429Q171 431 389 431Q549 431 553 430Q573 423 573 402Q573 371 541 360Q535 358 472 358H408L405 341Q393 269 393 222Q393 170 402 129T421 65T431 37Q431 20 417 5T381 -10Q370 -10 363 -7T347 17T331 77Q330 86 330 121Q330 170 339 226T357 318T367 358H269L268 354Q268 351 249 275T206 114T175 17Q164 -11 132 -11Z" style="stroke-width:3;"></path></g><g data-mml-node="mi" transform="translate(603,-150) scale(0.707)"><path data-c="1D457" d="M297 596Q297 627 318 644T361 661Q378 661 389 651T403 623Q403 595 384 576T340 557Q322 557 310 567T297 596ZM288 376Q288 405 262 405Q240 405 220 393T185 362T161 325T144 293L137 279Q135 278 121 278H107Q101 284 101 286T105 299Q126 348 164 391T252 441Q253 441 260 441T272 442Q296 441 316 432Q341 418 354 401T367 348V332L318 133Q267 -67 264 -75Q246 -125 194 -164T75 -204Q25 -204 7 -183T-12 -137Q-12 -110 7 -91T53 -71Q70 -71 82 -81T95 -112Q95 -148 63 -167Q69 -168 77 -168Q111 -168 139 -140T182 -74L193 -32Q204 11 219 72T251 197T278 308T289 365Q289 372 288 376Z" style="stroke-width:3;"></path></g></g></g></g></svg><mjx-assistive-mml unselectable="on" display="block" style="top:0px;left:0px;clip:rect(1px, 1px, 1px, 1px);-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:absolute;padding:1px 0px 0px 0px;border:0px;display:block;overflow:hidden;width:100%;"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mi>v</mi><mi>i</mi></msub><mo>=</mo><munder><mo data-mjx-texclass="OP">∑</mo><mrow data-mjx-texclass="ORD"><mi>j</mi><mo>∈</mo><mi>i</mi></mrow></munder><msub><mi>π</mi><mi>j</mi></msub></math></mjx-assistive-mml></mjx-container><p>then we can assess the spatial balance of a sample by measuring the distance of <mjx-container class="MathJax" jax="SVG" style="direction:ltr;position:relative;"><svg style="overflow:visible;min-height:1px;min-width:1px;vertical-align:-0.357ex;" xmlns="http://www.w3.org/2000/svg" width="1.837ex" height="1.359ex" role="img" focusable="false" viewBox="0 -443 812 600.8" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D463" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z" style="stroke-width:3;"></path></g><g data-mml-node="mi" transform="translate(518,-150) scale(0.707)"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z" style="stroke-width:3;"></path></g></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline" style="top:0px;left:0px;clip:rect(1px, 1px, 1px, 1px);-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:absolute;padding:1px 0px 0px 0px;border:0px;display:block;width:auto;overflow:hidden;"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>v</mi><mi>i</mi></msub></math></mjx-assistive-mml></mjx-container> from 1 for each polygon. (<a href="/BiodiversityObservationNetworks.jl/dev/bibliography#Grafstrom2012SpaCor">Grafström, 2025</a>) proposes the metric <code>B</code>, defined as</p><mjx-container class="MathJax" jax="SVG" display="true" style="direction:ltr;display:block;text-align:center;margin:1em 0;position:relative;"><svg style="overflow:visible;min-height:1px;min-width:1px;vertical-align:-2.819ex;" xmlns="http://www.w3.org/2000/svg" width="19.213ex" height="6.354ex" role="img" focusable="false" viewBox="0 -1562.5 8492.2 2808.5" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D435" d="M231 637Q204 637 199 638T194 649Q194 676 205 682Q206 683 335 683Q594 683 608 681Q671 671 713 636T756 544Q756 480 698 429T565 360L555 357Q619 348 660 311T702 219Q702 146 630 78T453 1Q446 0 242 0Q42 0 39 2Q35 5 35 10Q35 17 37 24Q42 43 47 45Q51 46 62 46H68Q95 46 128 49Q142 52 147 61Q150 65 219 339T288 628Q288 635 231 637ZM649 544Q649 574 634 600T585 634Q578 636 493 637Q473 637 451 637T416 636H403Q388 635 384 626Q382 622 352 506Q352 503 351 500L320 374H401Q482 374 494 376Q554 386 601 434T649 544ZM595 229Q595 273 572 302T512 336Q506 337 429 337Q311 337 310 336Q310 334 293 263T258 122L240 52Q240 48 252 48T333 46Q422 46 429 47Q491 54 543 105T595 229Z" style="stroke-width:3;"></path></g><g data-mml-node="mo" transform="translate(1036.8,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z" style="stroke-width:3;"></path></g><g data-mml-node="mfrac" transform="translate(2092.6,0)"><g data-mml-node="mn" transform="translate(270,676)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z" style="stroke-width:3;"></path></g><g data-mml-node="mi" transform="translate(220,-686)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z" style="stroke-width:3;"></path></g><rect width="800" height="60" x="120" y="220"></rect></g><g data-mml-node="munderover" transform="translate(3299.2,0)"><g data-mml-node="mo"><path data-c="2211" d="M60 948Q63 950 665 950H1267L1325 815Q1384 677 1388 669H1348L1341 683Q1320 724 1285 761Q1235 809 1174 838T1033 881T882 898T699 902H574H543H251L259 891Q722 258 724 252Q725 250 724 246Q721 243 460 -56L196 -356Q196 -357 407 -357Q459 -357 548 -357T676 -358Q812 -358 896 -353T1063 -332T1204 -283T1307 -196Q1328 -170 1348 -124H1388Q1388 -125 1381 -145T1356 -210T1325 -294L1267 -449L666 -450Q64 -450 61 -448Q55 -446 55 -439Q55 -437 57 -433L590 177Q590 178 557 222T452 366T322 544L56 909L55 924Q55 945 60 948Z" style="stroke-width:3;"></path></g><g data-mml-node="TeXAtom" transform="translate(148.2,-1087.9) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z" style="stroke-width:3;"></path></g><g data-mml-node="mo" transform="translate(345,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z" style="stroke-width:3;"></path></g><g data-mml-node="mn" transform="translate(1123,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z" style="stroke-width:3;"></path></g></g><g data-mml-node="mi" transform="translate(509.9,1150) scale(0.707)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z" style="stroke-width:3;"></path></g></g><g data-mml-node="mo" transform="translate(4743.2,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z" style="stroke-width:3;"></path></g><g data-mml-node="msub" transform="translate(5132.2,0)"><g data-mml-node="mi"><path data-c="1D463" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z" style="stroke-width:3;"></path></g><g data-mml-node="mi" transform="translate(518,-150) scale(0.707)"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z" style="stroke-width:3;"></path></g></g><g data-mml-node="mo" transform="translate(6166.4,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z" style="stroke-width:3;"></path></g><g data-mml-node="mn" transform="translate(7166.6,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z" style="stroke-width:3;"></path></g><g data-mml-node="msup" transform="translate(7666.6,0)"><g data-mml-node="mo"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z" style="stroke-width:3;"></path></g><g data-mml-node="mn" transform="translate(422,413) scale(0.707)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z" style="stroke-width:3;"></path></g></g></g></g></svg><mjx-assistive-mml unselectable="on" display="block" style="top:0px;left:0px;clip:rect(1px, 1px, 1px, 1px);-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:absolute;padding:1px 0px 0px 0px;border:0px;display:block;overflow:hidden;width:100%;"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>B</mi><mo>=</mo><mfrac><mn>1</mn><mi>n</mi></mfrac><munderover><mo data-mjx-texclass="OP">∑</mo><mrow data-mjx-texclass="ORD"><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><mo stretchy="false">(</mo><msub><mi>v</mi><mi>i</mi></msub><mo>−</mo><mn>1</mn><msup><mo stretchy="false">)</mo><mn>2</mn></msup></math></mjx-assistive-mml></mjx-container><p>to measure spatial balance, where <em>smaller values indicate better spatial balance</em>.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/b17536d1f181b8ce5ffb2c19c55dfb67194fd4a8/src/utilities/spatialbalance.jl#L92-L126" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="BiodiversityObservationNetworks.contains-Union{Tuple{V}, Tuple{T}, Tuple{PolygonDomain{T}, V}} where {T, V}" href="#BiodiversityObservationNetworks.contains-Union{Tuple{V}, Tuple{T}, Tuple{PolygonDomain{T}, V}} where {T, V}"><span class="jlbinding">BiodiversityObservationNetworks.contains</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">contains</span></span></code></pre></div><span class="VPBadge info source-link"><!--[--><a href="https://github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/b17536d1f181b8ce5ffb2c19c55dfb67194fd4a8/src/domains/polygon.jl#L23-L25" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="BiodiversityObservationNetworks.extent-Tuple{PolygonDomain{&lt;:SimpleSDMPolygons.AbstractGeometry}}" href="#BiodiversityObservationNetworks.extent-Tuple{PolygonDomain{&lt;:SimpleSDMPolygons.AbstractGeometry}}"><span class="jlbinding">BiodiversityObservationNetworks.extent</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">extent</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(p</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;">PolygonDomain{T&lt;:SimpleSDMPolygons.AbstractGeometry}</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">)</span></span></code></pre></div><span class="VPBadge info source-link"><!--[--><a href="https://github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/b17536d1f181b8ce5ffb2c19c55dfb67194fd4a8/src/domains/polygon.jl#L13-L15" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="BiodiversityObservationNetworks.extent-Tuple{RasterDomain{&lt;:Matrix}}" href="#BiodiversityObservationNetworks.extent-Tuple{RasterDomain{&lt;:Matrix}}"><span class="jlbinding">BiodiversityObservationNetworks.extent</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">extent</span></span></code></pre></div><span class="VPBadge info source-link"><!--[--><a href="https://github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/b17536d1f181b8ce5ffb2c19c55dfb67194fd4a8/src/domains/raster.jl#L83-L85" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="BiodiversityObservationNetworks.jensenshannon-Tuple{RasterStack, BiodiversityObservationNetwork}" href="#BiodiversityObservationNetworks.jensenshannon-Tuple{RasterStack, BiodiversityObservationNetwork}"><span class="jlbinding">BiodiversityObservationNetworks.jensenshannon</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">jensenshannon</span></span></code></pre></div><p>The <a href="https://en.wikipedia.org/wiki/Jensen%E2%80%93Shannon_divergence" target="_blank" rel="noreferrer">Jensen-Shannon Divergence</a> is a method for measuring the distance between two probability distributions.</p><p>This method provides a comparison between the distribution of environmental variables in set of <code>SDMLayers</code>, <code>layers</code>, to the values of those variables at the sites within a <a href="/BiodiversityObservationNetworks.jl/dev/reference/api#BiodiversityObservationNetworks.BiodiversityObservationNetwork"><code>BiodiversityObservationNetwork</code></a> <code>bon</code>.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/b17536d1f181b8ce5ffb2c19c55dfb67194fd4a8/src/utilities/distances.jl#L28-L39" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="BiodiversityObservationNetworks.rarity-Tuple{DistanceToAnalogNode, BiodiversityObservationNetwork, RasterStack}" href="#BiodiversityObservationNetworks.rarity-Tuple{DistanceToAnalogNode, BiodiversityObservationNetwork, RasterStack}"><span class="jlbinding">BiodiversityObservationNetworks.rarity</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rarity</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;">DistanceToAnalogNode</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> bon</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> layers</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> pca</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">)</span></span></code></pre></div><p>For each cell, compute the distance in z-scored feature space to the nearest selected BON node in <code>layers</code>. Optionally apply a shared PCA transform first.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/b17536d1f181b8ce5ffb2c19c55dfb67194fd4a8/src/utilities/rarity.jl#L99-L104" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="BiodiversityObservationNetworks.rarity-Tuple{WithinRange, BiodiversityObservationNetwork, RasterStack}" href="#BiodiversityObservationNetworks.rarity-Tuple{WithinRange, BiodiversityObservationNetwork, RasterStack}"><span class="jlbinding">BiodiversityObservationNetworks.rarity</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rarity</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;">WithinRange</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> bon</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> layers)</span></span></code></pre></div><p>Boolean rarity surface indicating whether each cell lies within the hyper- rectangle spanned by the per-feature minima and maxima of the BON nodes.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/b17536d1f181b8ce5ffb2c19c55dfb67194fd4a8/src/utilities/rarity.jl#L149-L154" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="BiodiversityObservationNetworks.sample-Tuple{}" href="#BiodiversityObservationNetworks.sample-Tuple{}"><span class="jlbinding">BiodiversityObservationNetworks.sample</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">sample</span></span></code></pre></div><span class="VPBadge info source-link"><!--[--><a href="https://github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/b17536d1f181b8ce5ffb2c19c55dfb67194fd4a8/src/sample.jl#L14-L16" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="BiodiversityObservationNetworks.spatialbalance-Tuple{MoransI, BiodiversityObservationNetwork, RasterDomain}" href="#BiodiversityObservationNetworks.spatialbalance-Tuple{MoransI, BiodiversityObservationNetwork, RasterDomain}"><span class="jlbinding">BiodiversityObservationNetworks.spatialbalance</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">spatialbalance</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;">MoransI</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> raster</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;">SDMLayer</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> bon</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;">BiodiversityObservationNetwork</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">)</span></span></code></pre></div><span class="VPBadge info source-link"><!--[--><a href="https://github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/b17536d1f181b8ce5ffb2c19c55dfb67194fd4a8/src/utilities/spatialbalance.jl#L56-L58" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="BiodiversityObservationNetworks.spatialbalance-Tuple{VoronoiVariance, BiodiversityObservationNetwork, PolygonDomain}" href="#BiodiversityObservationNetworks.spatialbalance-Tuple{VoronoiVariance, BiodiversityObservationNetwork, PolygonDomain}"><span class="jlbinding">BiodiversityObservationNetworks.spatialbalance</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">spatialbalance</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;">Type{VoronoiVariance}</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> bon</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;">BiodiversityObservationNetwork</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> geom)</span></span></code></pre></div><span class="VPBadge info source-link"><!--[--><a href="https://github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/b17536d1f181b8ce5ffb2c19c55dfb67194fd4a8/src/utilities/spatialbalance.jl#L131-L133" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="BiodiversityObservationNetworks.spatialbalance-Union{Tuple{T}, Tuple{Type{T}, Any, Any}} where T" href="#BiodiversityObservationNetworks.spatialbalance-Union{Tuple{T}, Tuple{Type{T}, Any, Any}} where T"><span class="jlbinding">BiodiversityObservationNetworks.spatialbalance</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">spatialbalance</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(metric</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;">SpatialBalanceMetric</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> bon</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> domain)</span></span></code></pre></div><p>Calculate a specific spatial balance metric for a given network and domain.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/b17536d1f181b8ce5ffb2c19c55dfb67194fd4a8/src/utilities/spatialbalance.jl#L3-L7" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="BiodiversityObservationNetworks.voronoi-Tuple{Any, Any}" href="#BiodiversityObservationNetworks.voronoi-Tuple{Any, Any}"><span class="jlbinding">BiodiversityObservationNetworks.voronoi</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">voronoi</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(bon</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> domain)</span></span></code></pre></div><p>Construct Voronoi polygons for the nodes in a <code>BiodiversityObservationNetwork</code> within the given domain. The domain is coerced to a <code>PolygonDomain</code> when needed. Output polygons are clipped to the domain extent.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/b17536d1f181b8ce5ffb2c19c55dfb67194fd4a8/src/utilities/voronoi.jl#L1-L8" target="_blank" rel="noreferrer">source</a><!--]--></span></details><h1 id="Private-API" tabindex="-1">Private API <a class="header-anchor" href="#Private-API" aria-label="Permalink to &quot;Private API {#Private-API}&quot;">​</a></h1><details class="jldocstring custom-block" open><summary><a id="BiodiversityObservationNetworks.RarityMetric" href="#BiodiversityObservationNetworks.RarityMetric"><span class="jlbinding">BiodiversityObservationNetworks.RarityMetric</span></a> <span class="VPBadge info jlObjectType jlType"><!--[-->Type<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">RarityMetric</span></span></code></pre></div><p>Abstract type encompassing all methods for computing environmental rarity.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/b17536d1f181b8ce5ffb2c19c55dfb67194fd4a8/src/utilities/rarity.jl#L1-L5" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="BiodiversityObservationNetworks._2d_bas-Tuple{Any, Any}" href="#BiodiversityObservationNetworks._2d_bas-Tuple{Any, Any}"><span class="jlbinding">BiodiversityObservationNetworks._2d_bas</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">_2d_bas</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(sampler</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> domain)</span></span></code></pre></div><p>2D BAS using Halton bases <code>[2,3]</code> to generate spatially spread candidate cells, accepting those that fall on unmasked locations until <code>num_nodes</code> are selected.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/b17536d1f181b8ce5ffb2c19c55dfb67194fd4a8/src/samplers/balancedacceptance.jl#L78-L83" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="BiodiversityObservationNetworks._3d_bas-Tuple{Any, Any, Any}" href="#BiodiversityObservationNetworks._3d_bas-Tuple{Any, Any, Any}"><span class="jlbinding">BiodiversityObservationNetworks._3d_bas</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">_3d_bas</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(sampler</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> domain</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> inclusion)</span></span></code></pre></div><p>3D BAS using Halton bases <code>[2,3,5]</code>. A candidate <code>(i,j,z)</code> is accepted if the cell is unmasked and <code>z &lt; inclusion[i,j]</code>.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/b17536d1f181b8ce5ffb2c19c55dfb67194fd4a8/src/samplers/balancedacceptance.jl#L55-L60" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="BiodiversityObservationNetworks._above_one_update!-NTuple{6, Any}" href="#BiodiversityObservationNetworks._above_one_update!-NTuple{6, Any}"><span class="jlbinding">BiodiversityObservationNetworks._above_one_update!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">_above_one_update!</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(inclusion</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> pool</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> i</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> j</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> complete_flags</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> inclusion_flags)</span></span></code></pre></div><p>Apply the LPM update when the paired units have <code>πᵢ + πⱼ ≥ 1</code>.</p><p>One of the two units is set to 1 (selected) and the other is reduced to <code>πᵢ + πⱼ - 1</code>. The unit whose probability reaches 1 is marked both as included (<code>inclusion_flags</code>) and complete (<code>complete_flags</code>).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/b17536d1f181b8ce5ffb2c19c55dfb67194fd4a8/src/samplers/pivotal.jl#L29-L35" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="BiodiversityObservationNetworks._aggregate_pool-Tuple{Any}" href="#BiodiversityObservationNetworks._aggregate_pool-Tuple{Any}"><span class="jlbinding">BiodiversityObservationNetworks._aggregate_pool</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">_aggregate_pool</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(domains)</span></span></code></pre></div><p>Compute the intersection of valid sampling pools across multiple domains.</p><p><strong>Arguments</strong></p><ul><li><code>domains</code>: An iterable collection of domain objects (e.g., a vector of <code>RasterDomain</code>). Each element must have a <code>pool</code> field containing a boolean mask.</li></ul><p><strong>Returns</strong></p><ul><li>A <code>BitArray</code> representing the intersection of all pools. A cell is considered valid (<code>true</code>) only if it is valid in <em>all</em> provided domains.</li></ul><p><strong>Description</strong></p><p>This internal utility is primarily used when constructing a <code>RasterStack</code>. It ensures that sampling only occurs in locations that are valid across every layer in the stack (e.g., avoiding <code>NaN</code>s, missing data, or masked areas present in any single layer).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/b17536d1f181b8ce5ffb2c19c55dfb67194fd4a8/src/domains/stack.jl#L53-L70" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="BiodiversityObservationNetworks._apply_update_rule!-NTuple{6, Any}" href="#BiodiversityObservationNetworks._apply_update_rule!-NTuple{6, Any}"><span class="jlbinding">BiodiversityObservationNetworks._apply_update_rule!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">_apply_update_rule!</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(inclusion</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> pool</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> i</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> j</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> inclusion_flags</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> complete_flags)</span></span></code></pre></div><p>Dispatch to the appropriate LPM update based on whether <code>πᵢ + πⱼ</code> is below or at/above one.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/b17536d1f181b8ce5ffb2c19c55dfb67194fd4a8/src/samplers/pivotal.jl#L65-L70" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="BiodiversityObservationNetworks._below_one_update!-NTuple{5, Any}" href="#BiodiversityObservationNetworks._below_one_update!-NTuple{5, Any}"><span class="jlbinding">BiodiversityObservationNetworks._below_one_update!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">_below_one_update!</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(inclusion</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> pool</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> i</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> j</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> complete_flags)</span></span></code></pre></div><p>Apply the LPM update when the paired units have <code>πᵢ + πⱼ &lt; 1</code>.</p><p>One of the two units is set to 0 (not selected) and the other is increased to <code>πᵢ + πⱼ</code>. The unit whose probability reaches 0 is marked complete.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/b17536d1f181b8ce5ffb2c19c55dfb67194fd4a8/src/samplers/pivotal.jl#L47-L54" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="BiodiversityObservationNetworks._cube_flight_phase-Tuple{Any, Any}" href="#BiodiversityObservationNetworks._cube_flight_phase-Tuple{Any, Any}"><span class="jlbinding">BiodiversityObservationNetworks._cube_flight_phase</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">_cube_flight_phase</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(πₖ</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> x)</span></span></code></pre></div><p>Run the flight phase of the cube method.</p><p><code>πₖ</code> are current inclusion probabilities; <code>x</code> (auxiliary matrix) is augmented with a first row of <code>πₖ&#39;</code> so sample size fixed. The method repeatedly finds a direction in the null space of the constraint matrix and pushes a small subset of probabilities to 0 or 1 while preserving balances in expectation.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/b17536d1f181b8ce5ffb2c19c55dfb67194fd4a8/src/samplers/cubesampling.jl#L90-L98" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="BiodiversityObservationNetworks._cube_landing_phase-Tuple{Any, Any, Any}" href="#BiodiversityObservationNetworks._cube_landing_phase-Tuple{Any, Any, Any}"><span class="jlbinding">BiodiversityObservationNetworks._cube_landing_phase</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">_cube_landing_phase</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(pikstar</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> πₖ</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> x)</span></span></code></pre></div><p>Run the landing phase if some probabilities are still fractional after flight. Formulate a small linear program over the fractional units to select a 0/1 sample whose auxiliary totals match <code>pikstar</code> in expectation with minimal cost <code>C(s)</code> (per Deville &amp; Tillé, 2004).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/b17536d1f181b8ce5ffb2c19c55dfb67194fd4a8/src/samplers/cubesampling.jl#L192-L199" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="BiodiversityObservationNetworks._get_address_length-Tuple{Any, Any}" href="#BiodiversityObservationNetworks._get_address_length-Tuple{Any, Any}"><span class="jlbinding">BiodiversityObservationNetworks._get_address_length</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">_get_address_length</span></span></code></pre></div><p>Returns the number of digits in a <a href="./@ref"><code>GeneralizedRandomTessellatedStratified</code></a> address for a specific geometry, computed based on the raster dimensions.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/b17536d1f181b8ce5ffb2c19c55dfb67194fd4a8/src/samplers/grts.jl#L80-L85" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="BiodiversityObservationNetworks._get_addresses-Tuple{Any, Any}" href="#BiodiversityObservationNetworks._get_addresses-Tuple{Any, Any}"><span class="jlbinding">BiodiversityObservationNetworks._get_addresses</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">_get_addresses</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">()</span></span></code></pre></div><span class="VPBadge info source-link"><!--[--><a href="https://github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/b17536d1f181b8ce5ffb2c19c55dfb67194fd4a8/src/samplers/grts.jl#L88-L90" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="BiodiversityObservationNetworks._h-Tuple{Any}" href="#BiodiversityObservationNetworks._h-Tuple{Any}"><span class="jlbinding">BiodiversityObservationNetworks._h</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">_h</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(K)</span></span></code></pre></div><p>Entropy-like diversity score based on the log-determinant of the kernel matrix <code>K</code>. Larger values encourage selecting points that are diverse with respect to previously chosen sites.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/b17536d1f181b8ce5ffb2c19c55dfb67194fd4a8/src/samplers/adaptivehotspot.jl#L86-L92" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="BiodiversityObservationNetworks._matérn-Tuple{Any, Any, Any}" href="#BiodiversityObservationNetworks._matérn-Tuple{Any, Any, Any}"><span class="jlbinding">BiodiversityObservationNetworks._matérn</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">_matérn</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(d</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> ρ</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> ν)</span></span></code></pre></div><p>Matérn covariance kernel evaluated at distance <code>d</code>, range <code>ρ</code>, smoothness <code>ν</code>. Normalized so that <code>_matérn(0, ρ, ν) == 1</code>.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/b17536d1f181b8ce5ffb2c19c55dfb67194fd4a8/src/samplers/adaptivehotspot.jl#L73-L78" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="BiodiversityObservationNetworks._pick_nodes-Tuple{Any, Any, Any}" href="#BiodiversityObservationNetworks._pick_nodes-Tuple{Any, Any, Any}"><span class="jlbinding">BiodiversityObservationNetworks._pick_nodes</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">_pick_nodes</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(sampler</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> raster</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> addresses)</span></span></code></pre></div><span class="VPBadge info source-link"><!--[--><a href="https://github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/b17536d1f181b8ce5ffb2c19c55dfb67194fd4a8/src/samplers/grts.jl#L104-L106" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="BiodiversityObservationNetworks._quadrant_fill!-Tuple{Any}" href="#BiodiversityObservationNetworks._quadrant_fill!-Tuple{Any}"><span class="jlbinding">BiodiversityObservationNetworks._quadrant_fill!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">_quadrant_fill!</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(mat)</span></span></code></pre></div><p>Takes a matrix <code>mat</code> and splits it into quadrants randomly labeled one through four.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/b17536d1f181b8ce5ffb2c19c55dfb67194fd4a8/src/samplers/grts.jl#L44-L48" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="BiodiversityObservationNetworks._quadrant_split!-Tuple{Any, Any}" href="#BiodiversityObservationNetworks._quadrant_split!-Tuple{Any, Any}"><span class="jlbinding">BiodiversityObservationNetworks._quadrant_split!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">_quadrant_split!</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(mat</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> grid_size)</span></span></code></pre></div><p>Splits a matrix <code>mat</code> into nested quadrants, where the side-length of a submatrix to be split into quadrants is given by <code>grid_size</code>.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/b17536d1f181b8ce5ffb2c19c55dfb67194fd4a8/src/samplers/grts.jl#L61-L66" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="BiodiversityObservationNetworks._redistribute_masked_weight!-Tuple{Any, RasterDomain{&lt;:Matrix}}" href="#BiodiversityObservationNetworks._redistribute_masked_weight!-Tuple{Any, RasterDomain{&lt;:Matrix}}"><span class="jlbinding">BiodiversityObservationNetworks._redistribute_masked_weight!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">_redistribute_masked_weight!</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(domain</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> inclusion</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;">RasterDomain{&lt;:Matrix}</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">)</span></span></code></pre></div><p>Matrix-backed variant of masked weight redistribution.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/b17536d1f181b8ce5ffb2c19c55dfb67194fd4a8/src/inclusion.jl#L48-L52" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="BiodiversityObservationNetworks._redistribute_masked_weight!-Tuple{Any, RasterDomain{&lt;:SimpleSDMLayers.SDMLayer}}" href="#BiodiversityObservationNetworks._redistribute_masked_weight!-Tuple{Any, RasterDomain{&lt;:SimpleSDMLayers.SDMLayer}}"><span class="jlbinding">BiodiversityObservationNetworks._redistribute_masked_weight!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">_redistribute_masked_weight!</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(domain</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> inclusion</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;">RasterDomain{&lt;:SDMLayer}</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">)</span></span></code></pre></div><p>Redistribute any probability mass assigned to masked-out cells uniformly across valid indices in <code>domain</code>. Mutates <code>inclusion</code> in-place.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/b17536d1f181b8ce5ffb2c19c55dfb67194fd4a8/src/inclusion.jl#L32-L37" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="BiodiversityObservationNetworks._rescale_node-Tuple{Any, Real, Real}" href="#BiodiversityObservationNetworks._rescale_node-Tuple{Any, Real, Real}"><span class="jlbinding">BiodiversityObservationNetworks._rescale_node</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">_rescale_node</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(domain</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> x</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;">Real</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> y</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;">Real</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">)</span></span></code></pre></div><p>Map unit-cube Halton coordinates <code>(x, y)</code> to integer raster indices in <code>domain</code>.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/b17536d1f181b8ce5ffb2c19c55dfb67194fd4a8/src/samplers/balancedacceptance.jl#L25-L29" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="BiodiversityObservationNetworks._sample-Tuple{BalancedAcceptance, Any}" href="#BiodiversityObservationNetworks._sample-Tuple{BalancedAcceptance, Any}"><span class="jlbinding">BiodiversityObservationNetworks._sample</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">_sample</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(sampler</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;">BalancedAcceptance</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> domain</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> inclusion</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;">nothing</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">)</span></span></code></pre></div><p>Generate a spatially balanced sample using BAS. With <code>inclusion</code>, perform 3D BAS to respect per-cell probabilities; otherwise perform 2D BAS over the mask.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/b17536d1f181b8ce5ffb2c19c55dfb67194fd4a8/src/samplers/balancedacceptance.jl#L36-L41" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="BiodiversityObservationNetworks._sample-Tuple{CubeSampling, Any}" href="#BiodiversityObservationNetworks._sample-Tuple{CubeSampling, Any}"><span class="jlbinding">BiodiversityObservationNetworks._sample</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">_sample</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(sampler</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;">CubeSampling</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> domain</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> inclusion</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;">nothing</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">)</span></span></code></pre></div><p>Draw a sample using the cube method, balancing means of auxiliary variables (<code>getfeatures(domain)</code>) while achieving the desired sample size in expectation.</p><p>Arguments:</p><ul><li><p><code>sampler.num_nodes</code>: desired number of selected sites</p></li><li><p><code>domain</code>: sampling domain; must support <code>getpool(domain)</code> and <code>getfeatures(domain)</code></p></li><li><p><code>inclusion</code>: optional vector/array of inclusion probabilities indexed by pool items</p></li></ul><p>Returns a <code>BiodiversityObservationNetwork</code>.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/b17536d1f181b8ce5ffb2c19c55dfb67194fd4a8/src/samplers/cubesampling.jl#L22-L34" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="BiodiversityObservationNetworks._sample-Tuple{Pivotal, Any}" href="#BiodiversityObservationNetworks._sample-Tuple{Pivotal, Any}"><span class="jlbinding">BiodiversityObservationNetworks._sample</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">_sample</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(sampler</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;">Pivotal</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> domain</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> inclusion</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;">nothing</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">)</span></span></code></pre></div><p>Draw a spatially balanced sample using the Local Pivotal Method.</p><p>Arguments:</p><ul><li><p><code>sampler.num_nodes</code>: desired number of selected sites (also used to derive a uniform inclusion vector when <code>inclusion</code> is not provided)</p></li><li><p><code>domain</code>: sampling domain; must support <code>getpool(domain)</code> and <code>getnearestneighbors(domain)</code></p></li><li><p><code>inclusion</code>: optional vector/array of inclusion probabilities indexed by pool items; if <code>nothing</code>, uniform probabilities are computed via <code>get_uniform_inclusion</code>.</p></li></ul><p>Returns a <code>BiodiversityObservationNetwork</code> with nodes whose final inclusion indicators are 1 after the LPM iterations.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/b17536d1f181b8ce5ffb2c19c55dfb67194fd4a8/src/samplers/pivotal.jl#L81-L95" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="BiodiversityObservationNetworks._sample-Tuple{SpatiallyCorrelatedPoisson, Any}" href="#BiodiversityObservationNetworks._sample-Tuple{SpatiallyCorrelatedPoisson, Any}"><span class="jlbinding">BiodiversityObservationNetworks._sample</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">_sample</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(sampler</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;">SpatiallyCorrelatedPoisson</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> domain</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> inclusion_probs)</span></span></code></pre></div><p>Perform Spatially Correlated Poisson sampling following Grafström (2012).</p><p><strong>Arguments</strong></p><ul><li><p><code>sampler::SpatiallyCorrelatedPoisson</code>: The sampling strategy object.</p></li><li><p><code>domain</code>: The spatial domain (supports <code>size(domain)</code> and distance calculation).</p></li><li><p><code>inclusion_probs</code>: Initial inclusion probabilities for each unit. Defaults to uniform: <code>(number_of_nodes / N)</code> for all units.</p></li></ul><p><strong>Returns</strong></p><ul><li>A <a href="./@ref"><code>BiodiversityObservationNetwork.jl</code></a> containing units included in the sample.</li></ul><p><strong>Example Usage</strong></p><p><code>sample(SpatiallyCorrelatedPoisson(), zeros(30,20))</code></p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/b17536d1f181b8ce5ffb2c19c55dfb67194fd4a8/src/samplers/spatiallycorrelatedpoisson.jl#L28-L44" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="BiodiversityObservationNetworks._sample-Tuple{SpatiallyStratified, Any}" href="#BiodiversityObservationNetworks._sample-Tuple{SpatiallyStratified, Any}"><span class="jlbinding">BiodiversityObservationNetworks._sample</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">_sample</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(sampler</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;">SpatiallyStratified</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> domain</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> inclusion</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;">nothing</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">)</span></span></code></pre></div><p>Draw a stratified random sample across unique values in <code>domain</code>.</p><p>Arguments:</p><ul><li><p><code>sampler.num_nodes</code>: total number of units to sample across all strata</p></li><li><p><code>domain</code>: sampling domain; must support <code>getpool(domain)</code> and indexing <code>domain[x]</code></p></li></ul><p>Returns a <code>BiodiversityObservationNetwork</code>.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/b17536d1f181b8ce5ffb2c19c55dfb67194fd4a8/src/samplers/stratified.jl#L14-L24" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="BiodiversityObservationNetworks._sort_features_by_mahalanobis-Tuple{Any, Any}" href="#BiodiversityObservationNetworks._sort_features_by_mahalanobis-Tuple{Any, Any}"><span class="jlbinding">BiodiversityObservationNetworks._sort_features_by_mahalanobis</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">_sort_features_by_mahalanobis</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(features</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> inclusion)</span></span></code></pre></div><p>Order units to stabilize the flight phase by spreading early decisions across feature space. Units are sorted by Mahalanobis distance from the inclusion- weighted mean feature vector.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/b17536d1f181b8ce5ffb2c19c55dfb67194fd4a8/src/samplers/cubesampling.jl#L69-L75" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="BiodiversityObservationNetworks._standardize-Tuple{Any, Any}" href="#BiodiversityObservationNetworks._standardize-Tuple{Any, Any}"><span class="jlbinding">BiodiversityObservationNetworks._standardize</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">_standardize</span></span></code></pre></div><p>Standardizes the values of a matrix of predictors across the entire population <code>Xfull</code>, and a set of predictors associated with the sampled sites, <code>Xsampled</code> by scaling each predictor to [0,1].</p><p><code>Xsampled</code> is standardized based on the minimum and maximum values of each predictor across the population, so both matrices a return on the same scale.</p><p><em>Arguments</em>:</p><ul><li><p><code>Xfull</code>: an <code>n</code> x <code>d</code> matrix, where <code>n</code> is the size of the population, and <code>d</code> is the number of predictors</p></li><li><p><code>Xsampled</code>: an <code>m</code> x <code>d</code> matrix, where <code>m</code> &lt; <code>n</code> is the size of the sample</p></li></ul><span class="VPBadge info source-link"><!--[--><a href="https://github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/b17536d1f181b8ce5ffb2c19c55dfb67194fd4a8/src/utilities/distances.jl#L1-L16" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="BiodiversityObservationNetworks._update_psi-Tuple{Any, Any}" href="#BiodiversityObservationNetworks._update_psi-Tuple{Any, Any}"><span class="jlbinding">BiodiversityObservationNetworks._update_psi</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">_update_psi</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(Ψ</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> B)</span></span></code></pre></div><p>Given current working vector <code>Ψ</code> and constraint block <code>B</code>, compute a feasible update along a null-space direction <code>u</code> by maximizing step sizes <code>λ₁, λ₂</code> that keep probabilities within [0,1].</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/b17536d1f181b8ce5ffb2c19c55dfb67194fd4a8/src/samplers/cubesampling.jl#L148-L154" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="BiodiversityObservationNetworks.convert_inclusion-Tuple{Any, Any, Nothing}" href="#BiodiversityObservationNetworks.convert_inclusion-Tuple{Any, Any, Nothing}"><span class="jlbinding">BiodiversityObservationNetworks.convert_inclusion</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">convert_inclusion</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(sampler</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> domain</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> inclusion</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> kwargs</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">)</span></span></code></pre></div><p>Coerce an <code>inclusion</code> specification to a representation compatible with <code>domain</code>. Also ensures totals sum to <code>sampler.num_nodes</code> (renormalizing if needed) and redistributes probability assigned to masked-out cells back to valid cells. Returns <code>nothing</code> when <code>inclusion</code> is <code>nothing</code>.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/b17536d1f181b8ce5ffb2c19c55dfb67194fd4a8/src/inclusion.jl#L89-L96" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="BiodiversityObservationNetworks.convert_mask-Tuple{RasterDomain, AbstractMatrix}" href="#BiodiversityObservationNetworks.convert_mask-Tuple{RasterDomain, AbstractMatrix}"><span class="jlbinding">BiodiversityObservationNetworks.convert_mask</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">convert_mask</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(domain</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;">RasterDomain</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> mask</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;">AbstractMatrix</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> kwargs</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">)</span></span></code></pre></div><p>Convert a boolean matrix mask to a <code>RasterDomain</code>-aligned mask.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/b17536d1f181b8ce5ffb2c19c55dfb67194fd4a8/src/mask.jl#L20-L24" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="BiodiversityObservationNetworks.convert_mask-Tuple{RasterDomain, PolygonDomain}" href="#BiodiversityObservationNetworks.convert_mask-Tuple{RasterDomain, PolygonDomain}"><span class="jlbinding">BiodiversityObservationNetworks.convert_mask</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">convert_mask</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(domain</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;">RasterDomain</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> mask</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;">PolygonDomain</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> kwargs</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">)</span></span></code></pre></div><p>Rasterize a polygon mask into the grid of <code>domain</code> and return a <code>RasterDomain</code>-aligned mask.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/b17536d1f181b8ce5ffb2c19c55dfb67194fd4a8/src/mask.jl#L71-L76" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="BiodiversityObservationNetworks.convert_mask-Tuple{RasterDomain, SimpleSDMLayers.SDMLayer}" href="#BiodiversityObservationNetworks.convert_mask-Tuple{RasterDomain, SimpleSDMLayers.SDMLayer}"><span class="jlbinding">BiodiversityObservationNetworks.convert_mask</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">convert_mask</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(domain</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;">RasterDomain</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> mask</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;">SDMLayer</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> kwargs</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">)</span></span></code></pre></div><p>Convert an <code>SDMLayer</code> to a <code>RasterDomain</code> mask with aligned indices.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/b17536d1f181b8ce5ffb2c19c55dfb67194fd4a8/src/mask.jl#L30-L34" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="BiodiversityObservationNetworks.convert_mask-Tuple{RasterDomain, SimpleSDMPolygons.AbstractGeometry}" href="#BiodiversityObservationNetworks.convert_mask-Tuple{RasterDomain, SimpleSDMPolygons.AbstractGeometry}"><span class="jlbinding">BiodiversityObservationNetworks.convert_mask</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">convert_mask</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(domain</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;">RasterDomain</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> mask</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;">SimpleSDMPolygons.AbstractGeometry</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">)</span></span></code></pre></div><p>Coerce a polygon geometry to a <code>RasterDomain</code> mask by rasterizing the polygon.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/b17536d1f181b8ce5ffb2c19c55dfb67194fd4a8/src/mask.jl#L62-L66" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="BiodiversityObservationNetworks.convert_mask-Tuple{RasterDomain{&lt;:SimpleSDMLayers.SDMLayer}, RasterDomain{&lt;:SimpleSDMLayers.SDMLayer}}" href="#BiodiversityObservationNetworks.convert_mask-Tuple{RasterDomain{&lt;:SimpleSDMLayers.SDMLayer}, RasterDomain{&lt;:SimpleSDMLayers.SDMLayer}}"><span class="jlbinding">BiodiversityObservationNetworks.convert_mask</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">convert_mask</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(domain</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;">RasterDomain{&lt;:SDMLayer}</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> mask</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;">RasterDomain{&lt;:SDMLayer}</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> kwargs</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">)</span></span></code></pre></div><p>Validate size, extent, and CRS when both domain and mask are SDMLayer-backed.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/b17536d1f181b8ce5ffb2c19c55dfb67194fd4a8/src/mask.jl#L39-L43" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="BiodiversityObservationNetworks.convert_mask-Union{Tuple{T}, Tuple{RasterDomain{T}, RasterDomain{&lt;:Matrix}}} where T&lt;:Union{var&quot;#s19&quot;, var&quot;#s20&quot;} where {var&quot;#s19&quot;&lt;:SimpleSDMLayers.SDMLayer, var&quot;#s20&quot;&lt;:Matrix}" href="#BiodiversityObservationNetworks.convert_mask-Union{Tuple{T}, Tuple{RasterDomain{T}, RasterDomain{&lt;:Matrix}}} where T&lt;:Union{var&quot;#s19&quot;, var&quot;#s20&quot;} where {var&quot;#s19&quot;&lt;:SimpleSDMLayers.SDMLayer, var&quot;#s20&quot;&lt;:Matrix}"><span class="jlbinding">BiodiversityObservationNetworks.convert_mask</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">convert_mask</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(domain</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;">RasterDomain{T}</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> mask</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;">RasterDomain{&lt;:Matrix}</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> kwargs</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">) </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">where</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> T</span></span></code></pre></div><p>Validate size when the mask is matrix-backed.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/b17536d1f181b8ce5ffb2c19c55dfb67194fd4a8/src/mask.jl#L52-L56" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="BiodiversityObservationNetworks.convert_node-Tuple{RasterDomain{&lt;:Matrix}, Any}" href="#BiodiversityObservationNetworks.convert_node-Tuple{RasterDomain{&lt;:Matrix}, Any}"><span class="jlbinding">BiodiversityObservationNetworks.convert_node</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">convert_node</span></span></code></pre></div><span class="VPBadge info source-link"><!--[--><a href="https://github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/b17536d1f181b8ce5ffb2c19c55dfb67194fd4a8/src/domains/raster.jl#L97-L99" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="BiodiversityObservationNetworks.convert_nodes-Tuple{RasterDomain, Any}" href="#BiodiversityObservationNetworks.convert_nodes-Tuple{RasterDomain, Any}"><span class="jlbinding">BiodiversityObservationNetworks.convert_nodes</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">convert_nodes</span></span></code></pre></div><span class="VPBadge info source-link"><!--[--><a href="https://github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/b17536d1f181b8ce5ffb2c19c55dfb67194fd4a8/src/domains/raster.jl#L103-L105" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="BiodiversityObservationNetworks.crs-Tuple{RasterDomain{&lt;:Matrix}}" href="#BiodiversityObservationNetworks.crs-Tuple{RasterDomain{&lt;:Matrix}}"><span class="jlbinding">BiodiversityObservationNetworks.crs</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">crs</span></span></code></pre></div><span class="VPBadge info source-link"><!--[--><a href="https://github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/b17536d1f181b8ce5ffb2c19c55dfb67194fd4a8/src/domains/raster.jl#L90-L92" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="BiodiversityObservationNetworks.get_uniform_inclusion-Tuple{Any, BiodiversityObservationNetwork}" href="#BiodiversityObservationNetworks.get_uniform_inclusion-Tuple{Any, BiodiversityObservationNetwork}"><span class="jlbinding">BiodiversityObservationNetworks.get_uniform_inclusion</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get_uniform_inclusion</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(sampler</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> bon</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;">BiodiversityObservationNetwork</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">)</span></span></code></pre></div><p>Construct a uniform inclusion vector for a BON-like domain.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/b17536d1f181b8ce5ffb2c19c55dfb67194fd4a8/src/inclusion.jl#L18-L22" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="BiodiversityObservationNetworks.get_uniform_inclusion-Union{Tuple{T}, Tuple{Any, T}} where T&lt;:Union{RasterDomain, RasterStack}" href="#BiodiversityObservationNetworks.get_uniform_inclusion-Union{Tuple{T}, Tuple{Any, T}} where T&lt;:Union{RasterDomain, RasterStack}"><span class="jlbinding">BiodiversityObservationNetworks.get_uniform_inclusion</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get_uniform_inclusion</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(sampler</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> domain)</span></span></code></pre></div><p>Construct a uniform inclusion surface for <code>domain</code> such that the sum of inclusion probabilities equals <code>sampler.num_nodes</code>.</p><p>Returns a <code>RasterDomain</code> when given a raster-like domain.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/b17536d1f181b8ce5ffb2c19c55dfb67194fd4a8/src/inclusion.jl#L1-L8" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="BiodiversityObservationNetworks.getcoordinates-Tuple{BiodiversityObservationNetwork}" href="#BiodiversityObservationNetworks.getcoordinates-Tuple{BiodiversityObservationNetwork}"><span class="jlbinding">BiodiversityObservationNetworks.getcoordinates</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">getcoordinates</span></span></code></pre></div><span class="VPBadge info source-link"><!--[--><a href="https://github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/b17536d1f181b8ce5ffb2c19c55dfb67194fd4a8/src/domains/bon.jl#L39-L41" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="BiodiversityObservationNetworks.getcoordinates-Tuple{RasterDomain{&lt;:Matrix}}" href="#BiodiversityObservationNetworks.getcoordinates-Tuple{RasterDomain{&lt;:Matrix}}"><span class="jlbinding">BiodiversityObservationNetworks.getcoordinates</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getcoordinates</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(domain)</span></span></code></pre></div><p>Retrieve the spatial coordinates of all valid (unmasked) sampling locations in the domain.</p><p><strong>Arguments</strong></p><ul><li><code>domain</code>: A <code>RasterDomain</code> or a <code>RasterStack</code>.</li></ul><p><strong>Returns</strong></p><ul><li>A <code>2 x N</code> Matrix{Float32}, where <code>N</code> is the number of valid locations in the pool,</li></ul><p>where each column is a coordinate in the valid pool of locations.</p><p><strong>Description</strong></p><p>Returns a matrix of coordinates corresponding to the valid sampling pool.</p><ul><li><p>For <strong>Matrix-backed domains</strong>, coordinates are the integer column (x) and row (y) indices.</p></li><li><p>For <strong>SDMLayer-backed domains</strong>, coordinates are the projected spatial coordinates (e.g., Longitude/Latitude) derived from the layer&#39;s geotransform.</p></li><li><p>For <strong>RasterStacks</strong>, coordinates are derived from the first layer in the stack (assuming all layers share the same grid).</p></li></ul><span class="VPBadge info source-link"><!--[--><a href="https://github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/b17536d1f181b8ce5ffb2c19c55dfb67194fd4a8/src/domains/raster.jl#L53-L72" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="BiodiversityObservationNetworks.getfeatures-Tuple{BiodiversityObservationNetwork}" href="#BiodiversityObservationNetworks.getfeatures-Tuple{BiodiversityObservationNetwork}"><span class="jlbinding">BiodiversityObservationNetworks.getfeatures</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">getfeatures</span></span></code></pre></div><span class="VPBadge info source-link"><!--[--><a href="https://github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/b17536d1f181b8ce5ffb2c19c55dfb67194fd4a8/src/domains/bon.jl#L34-L36" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="BiodiversityObservationNetworks.getfeatures-Tuple{RasterDomain}" href="#BiodiversityObservationNetworks.getfeatures-Tuple{RasterDomain}"><span class="jlbinding">BiodiversityObservationNetworks.getfeatures</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getfeatures</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(domain)</span></span></code></pre></div><p>Return a matrix of auxiliary variables (features) for valid pixels in the domain. Rows are features, columns are pixels.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/b17536d1f181b8ce5ffb2c19c55dfb67194fd4a8/src/domains/raster.jl#L42-L47" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="BiodiversityObservationNetworks.getpool-Tuple{BiodiversityObservationNetwork}" href="#BiodiversityObservationNetworks.getpool-Tuple{BiodiversityObservationNetwork}"><span class="jlbinding">BiodiversityObservationNetworks.getpool</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">getpool</span></span></code></pre></div><span class="VPBadge info source-link"><!--[--><a href="https://github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/b17536d1f181b8ce5ffb2c19c55dfb67194fd4a8/src/domains/bon.jl#L29-L31" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="BiodiversityObservationNetworks.getpool-Tuple{RasterDomain}" href="#BiodiversityObservationNetworks.getpool-Tuple{RasterDomain}"><span class="jlbinding">BiodiversityObservationNetworks.getpool</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getpool</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(domain)</span></span></code></pre></div><p>Return the collection of valid (unmasked) indices for the given domain.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/b17536d1f181b8ce5ffb2c19c55dfb67194fd4a8/src/domains/raster.jl#L34-L38" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="BiodiversityObservationNetworks.ismasked-Tuple{RasterDomain{&lt;:SimpleSDMLayers.SDMLayer}, Real, Real}" href="#BiodiversityObservationNetworks.ismasked-Tuple{RasterDomain{&lt;:SimpleSDMLayers.SDMLayer}, Real, Real}"><span class="jlbinding">BiodiversityObservationNetworks.ismasked</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">ismasked</span></span></code></pre></div><span class="VPBadge info source-link"><!--[--><a href="https://github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/b17536d1f181b8ce5ffb2c19c55dfb67194fd4a8/src/domains/raster.jl#L124-L126" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="BiodiversityObservationNetworks.mask!-Tuple{Any, Nothing}" href="#BiodiversityObservationNetworks.mask!-Tuple{Any, Nothing}"><span class="jlbinding">BiodiversityObservationNetworks.mask!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mask!</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(domain</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> mask)</span></span></code></pre></div><p>Apply <code>mask</code> to <code>domain</code> in-place. Overloads handle <code>RasterDomain</code>s backed by <code>SDMLayer</code> or <code>Matrix</code>, and propagate to all rasters in a <code>RasterStack</code>. Polygon masks are supported for SDMLayer-backed rasters.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/b17536d1f181b8ce5ffb2c19c55dfb67194fd4a8/src/mask.jl#L88-L94" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="BiodiversityObservationNetworks.normalize_inclusion!-Tuple{Any, RasterDomain{&lt;:SimpleSDMLayers.SDMLayer}}" href="#BiodiversityObservationNetworks.normalize_inclusion!-Tuple{Any, RasterDomain{&lt;:SimpleSDMLayers.SDMLayer}}"><span class="jlbinding">BiodiversityObservationNetworks.normalize_inclusion!</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">normalize_inclusion!</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(sampler</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> inclusion)</span></span></code></pre></div><p>Scale <code>inclusion</code> so that its total mass equals <code>sampler.num_nodes</code>. Overloads exist for SDMLayer-backed rasters, matrix-backed rasters, and vectors. Mutates <code>inclusion</code> in-place.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/b17536d1f181b8ce5ffb2c19c55dfb67194fd4a8/src/inclusion.jl#L66-L72" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="BiodiversityObservationNetworks.rescale_node-Tuple{RasterDomain{&lt;:Matrix}, Real, Real}" href="#BiodiversityObservationNetworks.rescale_node-Tuple{RasterDomain{&lt;:Matrix}, Real, Real}"><span class="jlbinding">BiodiversityObservationNetworks.rescale_node</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">rescale_node</span></span></code></pre></div><span class="VPBadge info source-link"><!--[--><a href="https://github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/b17536d1f181b8ce5ffb2c19c55dfb67194fd4a8/src/domains/raster.jl#L109-L111" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="BiodiversityObservationNetworks.tilt-Tuple{Any, Any}" href="#BiodiversityObservationNetworks.tilt-Tuple{Any, Any}"><span class="jlbinding">BiodiversityObservationNetworks.tilt</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tilt</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(layer</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> α)</span></span></code></pre></div><p>Performs logistic-exponential tilting on the on a layer with scaling factor α. This is useful for adjusting inclusion probabilities to scale more toward (α &gt; 1) or away from (α &lt; 1) extreme values.</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/b17536d1f181b8ce5ffb2c19c55dfb67194fd4a8/src/utilities/tilting.jl#L1-L7" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="BiodiversityObservationNetworks.to_domain-Tuple{SimpleSDMLayers.SDMLayer}" href="#BiodiversityObservationNetworks.to_domain-Tuple{SimpleSDMLayers.SDMLayer}"><span class="jlbinding">BiodiversityObservationNetworks.to_domain</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">to_domain</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(x</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">;</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> kwargs</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">)</span></span></code></pre></div><p>Coerce an input object into a valid internal domain representation (e.g., <code>RasterDomain</code>, <code>RasterStack</code>).</p><p><strong>Arguments</strong></p><ul><li><p><code>x</code>: The input object to convert. Can be a Matrix, SDMLayer, Vector of layers, Polygon, or an existing domain/network.</p></li><li><p><code>kwargs...</code>: Helper arguments for specific conversions (see below).</p></li></ul><p><strong>Methods</strong></p><ul><li><p><strong>1. Matrices and SDMLayers</strong>: Wraps the input in a RasterDomain. For SDMLayer inputs, the existing valid indices (non-NaN/masked) are preserved in the pool.</p><ul><li><p><code>to_domain(mat::AbstractMatrix)</code> -&gt; <code>RasterDomain</code></p></li><li><p><code>to_domain(layer::SDMLayer)</code> -&gt; <code>RasterDomain</code></p></li></ul></li><li><p><strong>2. Collections of layers (Stacks)</strong>: Converts a vector of inputs into a RasterStack. The sampling pool is aggregated as the intersection of valid pixels across all layers.</p><ul><li><p><code>to_domain(layers::Vector{&lt;:SDMLayer})</code> -&gt; <code>RasterStack</code></p></li><li><p><code>to_domain(mats::Vector{&lt;:AbstractMatrix})</code> -&gt; <code>RasterStack</code></p></li></ul></li><li><p><strong>3. Polygons (Rasterization)</strong>: Converts a vector geometry (Polygon) into a binary RasterDomain by rasterizing it.</p><ul><li><p><code>to_domain(poly::SimpleSDMPolygons.AbstractGeometry; grid_size=(100,100))</code> -&gt; <code>RasterDomain</code></p></li><li><p><code>to_domain(poly::PolygonDomain; grid_size=(100,100))</code> -&gt; <code>RasterDomain</code></p></li></ul></li><li><p><strong>4. Identity</strong>: Returns the input unchanged if it is already a valid domain or network type.</p><ul><li><p><code>to_domain(rd::RasterDomain)</code> -&gt; <code>RasterDomain</code></p></li><li><p><code>to_domain(rs::RasterStack)</code> -&gt; <code>RasterStack</code></p></li><li><p><code>to_domain(bon::BiodiversityObservationNetwork)</code> -&gt; <code>BiodiversityObservationNetwork</code></p></li></ul></li></ul><span class="VPBadge info source-link"><!--[--><a href="https://github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/b17536d1f181b8ce5ffb2c19c55dfb67194fd4a8/src/domains/conversion.jl#L1-L31" target="_blank" rel="noreferrer">source</a><!--]--></span></details><details class="jldocstring custom-block" open><summary><a id="BiodiversityObservationNetworks.unique_permutations-Union{Tuple{T}, Tuple{T, Any}} where T" href="#BiodiversityObservationNetworks.unique_permutations-Union{Tuple{T}, Tuple{T, Any}} where T"><span class="jlbinding">BiodiversityObservationNetworks.unique_permutations</span></a> <span class="VPBadge info jlObjectType jlMethod"><!--[-->Method<!--]--></span></summary><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes min-light min-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">unique_permutations</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(x</span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#1976D2;--shiki-dark:#79B8FF;">T</span><span style="--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> prefix </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> T</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;">()) </span><span style="--shiki-light:#D32F2F;--shiki-dark:#F97583;">where</span><span style="--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> {T}</span></span></code></pre></div><p>Generate all unique permutations for a multiset <code>x</code> without repetition of duplicates. Based on StackOverflow (<code>https://stackoverflow.com/questions/65051953/julia-generate-all-non-repeating-permutations-in-set-with-duplicates</code>).</p><span class="VPBadge info source-link"><!--[--><a href="https://github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/b17536d1f181b8ce5ffb2c19c55dfb67194fd4a8/src/samplers/cubesampling.jl#L291-L297" target="_blank" rel="noreferrer">source</a><!--]--></span></details></div></div></main><footer class="VPDocFooter" data-v-83890dd9 data-v-4f9813fa><!--[--><!--]--><div class="edit-info" data-v-4f9813fa><div class="edit-link" data-v-4f9813fa><a class="VPLink link vp-external-link-icon no-icon edit-link-button" href="https://https://github.com/PoisotLab/BiodiversityObservationNetworks.jl/edit/main/docs/src/reference/api.md" target="_blank" rel="noreferrer" data-v-4f9813fa><!--[--><span class="vpi-square-pen edit-link-icon" data-v-4f9813fa></span> Edit this page<!--]--></a></div><!----></div><!----></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-a9a9e638 data-v-c970a860><div class="container" data-v-c970a860><p class="message" data-v-c970a860>Made with <a href="https://luxdl.github.io/DocumenterVitepress.jl/dev/" target="_blank"><strong>DocumenterVitepress.jl</strong></a> by the <a href="https://poisotlab.io/" target="_blank">Computational Ecology Research Group</a><br></p><p class="copyright" data-v-c970a860>This documentation is released under the <a href="https://creativecommons.org/licenses/by/4.0/deed.en" target="_blank">CC-BY 4.0 licence</a> - 2025</p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"bibliography.md\":\"D8Wx5k9j\",\"howto_index.md\":\"DJ0j55wc\",\"index.md\":\"Bw8g1dx_\",\"manual.md\":\"CcmVyLwU\",\"reference_api.md\":\"CNIoeKOY\",\"reference_index.md\":\"Dpl9x6XS\",\"reference_samplers_index.md\":\"DXUZLl-u\",\"reference_utilities_index.md\":\"DWJwxDml\",\"tutorials_gettingstarted.md\":\"C8bxexTy\",\"tutorials_index.md\":\"kY04Lyly\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"SpeciesInteractionSamplers.jl\",\"description\":\"Documentation for BiodiversityObservationNetworks.jl\",\"base\":\"/BiodiversityObservationNetworks.jl/dev/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"outline\":\"deep\",\"siteTitle\":\"BONs.jl\",\"docFooter\":{\"next\":false,\"prev\":false},\"search\":{\"provider\":\"local\",\"options\":{\"detailedView\":true}},\"logo\":{\"src\":\"/logo.png\",\"width\":24,\"height\":24},\"nav\":[{\"text\":\"Tutorials\",\"items\":[{\"text\":\"Getting Started with BONs.jl\",\"link\":\"/tutorials/gettingstarted.md\"},{\"text\":\"Building Multistage Samplers\",\"link\":\"/tutorials/multistage.md\"},{\"text\":\"Measuring Spatial Balance\",\"link\":\"/tutorials/spatialbalance.md\"},{\"text\":\"Measuring Environmental Representativeness\",\"link\":\"/tutorials/envdistance.md\"},{\"text\":\"Designing a National BON\",\"link\":\"/tutorials/canbon.md\"}]},{\"text\":\"How-to\",\"link\":\"/howto\"},{\"text\":\"Reference\",\"items\":[{\"text\":\"Samplers\",\"link\":\"/reference/samplers\"},{\"text\":\"Utilities\",\"link\":\"/reference/utilities\"},{\"text\":\"API Reference\",\"link\":\"/reference/api\"}]}],\"sidebar\":{\"/tutorials/\":[{\"text\":\"Tutorials\",\"items\":[{\"text\":\"Getting Started with BONs.jl\",\"link\":\"/tutorials/gettingstarted.md\"},{\"text\":\"Building Multistage Samplers\",\"link\":\"/tutorials/multistage.md\"},{\"text\":\"Measuring Spatial Balance\",\"link\":\"/tutorials/spatialbalance.md\"},{\"text\":\"Measuring Environmental Representativeness\",\"link\":\"/tutorials/envdistance.md\"},{\"text\":\"Designing a National BON\",\"link\":\"/tutorials/canbon.md\"}]}],\"/howto/\":[{\"text\":\"How-to\",\"items\":[]}],\"/reference/\":[{\"text\":\"Samplers\",\"collapsed\":false,\"items\":[{\"text\":\"Simple Random Sampling\",\"link\":\"/reference/samplers/simplerandom\"},{\"text\":\"Balanced Acceptance Sampling\",\"link\":\"/reference/samplers/balancedacceptance\"},{\"text\":\"Generalized Random Tessellated Stratified Sampling\",\"link\":\"/reference/samplers/grts\"},{\"text\":\"Cube Sampling\",\"link\":\"/reference/samplers/cube\"},{\"text\":\"Adaptive Hotspot Detection\",\"link\":\"/reference/samplers/adaptivehotspot\"}]},{\"text\":\"Utilities\",\"collapsed\":false,\"items\":[{\"text\":\"Spatial Balance\",\"link\":\"/reference/utilities/spatialbalance.md\"},{\"text\":\"Environmental Distance\",\"link\":\"/reference/utilities/envdistance.md\"},{\"text\":\"Climate Rarity\",\"link\":\"/reference/utilities/rarity.md\"},{\"text\":\"Climate Velocity\",\"link\":\"/reference/utilities/velocity.md\"}]},{\"text\":\"Full API\",\"link\":\"/reference/api\"}]},\"editLink\":{\"pattern\":\"https://https://github.com/PoisotLab/BiodiversityObservationNetworks.jl/edit/main/docs/src/:path\"},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/PoisotLab/BiodiversityObservationNetworks.jl\"}],\"footer\":{\"message\":\"Made with <a href=\\\"https://luxdl.github.io/DocumenterVitepress.jl/dev/\\\" target=\\\"_blank\\\"><strong>DocumenterVitepress.jl</strong></a> by the <a href=\\\"https://poisotlab.io/\\\" target=\\\"_blank\\\">Computational Ecology Research Group</a><br>\",\"copyright\":\"This documentation is released under the <a href=\\\"https://creativecommons.org/licenses/by/4.0/deed.en\\\" target=\\\"_blank\\\">CC-BY 4.0 licence</a> - 2025\"}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":true}");</script>
    
  </body>
</html>