<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Public API · SpeciesInteractionSamplers.jl</title><meta name="title" content="Public API · SpeciesInteractionSamplers.jl"/><meta property="og:title" content="Public API · SpeciesInteractionSamplers.jl"/><meta property="twitter:title" content="Public API · SpeciesInteractionSamplers.jl"/><meta name="description" content="Documentation for SpeciesInteractionSamplers.jl."/><meta property="og:description" content="Documentation for SpeciesInteractionSamplers.jl."/><meta property="twitter:description" content="Documentation for SpeciesInteractionSamplers.jl."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.png" alt="SpeciesInteractionSamplers.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">SpeciesInteractionSamplers.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">-</a></li><li><a class="tocitem" href="../../bibliography/">References</a></li><li><a class="tocitem" href="../../howto/">How to</a></li><li><a class="tocitem" href="../../manual/">BiodiversityObservationNetworks.jl</a></li><li><a class="tocitem" href="../">Reference</a></li><li class="is-active"><a class="tocitem" href>Public API</a><ul class="internal"><li class="toplevel"><a class="tocitem" href="#Private-API"><span>Private API</span></a></li></ul></li><li><a class="tocitem" href="../samplers/">Samplers</a></li><li><a class="tocitem" href="../utilities/">Utilities</a></li><li><a class="tocitem" href="../../tutorials/">Tutorials</a></li><li><a class="tocitem" href="../../tutorials/gettingstarted/">Getting Started with BiodiversityObservationNetworks.jl</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Public API</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Public API</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/main/docs/src/reference/api.md#" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Public-API"><a class="docs-heading-anchor" href="#Public-API">Public API</a><a id="Public-API-1"></a><a class="docs-heading-anchor-permalink" href="#Public-API" title="Permalink"></a></h1><article><details class="docstring" open="true"><summary id="BiodiversityObservationNetworks.AdaptiveHotspot"><a class="docstring-binding" href="#BiodiversityObservationNetworks.AdaptiveHotspot"><code>BiodiversityObservationNetworks.AdaptiveHotspot</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">AdaptiveHotspot{I, F} &lt;: BONSampler</code></pre><p>Implements Adaptive Hotspot Sampling for high-uncertainty or high-value targets.</p><p><strong>Fields</strong></p><ul><li><code>num_nodes::I</code>: Number of sites.</li><li><code>scale::F</code>: Range parameter (ρ) of the Matérn covariance kernel.</li><li><code>smoothness::F</code>: Smoothness parameter (ν) of the Matérn covariance kernel.</li></ul><p><strong>Description</strong></p><p>Starts at the global maximum of the target/uncertainty surface. Subsequent points  are chosen to maximize a trade-off between the target value and spatial diversity  (measured via the determinant of a kernel matrix).</p><p><strong>References</strong></p><ul><li>Andrade-Pacheco, R., et al. (2020) Finding hotspots...</li></ul></div><a class="docs-sourcelink" target="_blank" href="github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/1c2f4b91f3ea1171eb97b2659b0bccb2d87897d4/src/samplers/adaptivehotspot.jl#L1-L18">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BiodiversityObservationNetworks.BONSampler"><a class="docstring-binding" href="#BiodiversityObservationNetworks.BONSampler"><code>BiodiversityObservationNetworks.BONSampler</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">BONSampler</code></pre></div><a class="docs-sourcelink" target="_blank" href="github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/1c2f4b91f3ea1171eb97b2659b0bccb2d87897d4/src/BiodiversityObservationNetworks.jl#L23-L25">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BiodiversityObservationNetworks.BalancedAcceptance"><a class="docstring-binding" href="#BiodiversityObservationNetworks.BalancedAcceptance"><code>BiodiversityObservationNetworks.BalancedAcceptance</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">BalancedAcceptance &lt;: BONSampler</code></pre><p>Implements Balanced Acceptance Sampling (BAS) using Halton sequences.</p><p><strong>Fields</strong></p><ul><li><code>num_nodes::Int</code>: The number of sites to select.</li></ul><p><strong>Description</strong></p><p>BAS generates spatially balanced samples by mapping the domain to a Halton sequence. If <code>inclusion</code> probabilities are provided, it uses a 3D Halton sequence where the  third dimension acts as an acceptance threshold against the probability surface.</p><p><strong>References</strong></p><ul><li>Robertson, B. L., et al. (2013). </li></ul></div><a class="docs-sourcelink" target="_blank" href="github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/1c2f4b91f3ea1171eb97b2659b0bccb2d87897d4/src/samplers/balancedacceptance.jl#L1-L16">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BiodiversityObservationNetworks.BiodiversityObservationNetwork"><a class="docstring-binding" href="#BiodiversityObservationNetworks.BiodiversityObservationNetwork"><code>BiodiversityObservationNetworks.BiodiversityObservationNetwork</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">BiodiversityObservationNetwork{N, D}</code></pre><p>Represents the selected sampling sites and their associated data.</p><p><strong>Fields</strong></p><ul><li><code>nodes::N</code>: The coordinates or indices of the selected sites.</li><li><code>auxiliary::Matrix</code>: The underlying feature matrix associated with the nodes.</li></ul></div><a class="docs-sourcelink" target="_blank" href="github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/1c2f4b91f3ea1171eb97b2659b0bccb2d87897d4/src/domains/bon.jl#L1-L9">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BiodiversityObservationNetworks.CubeSampling"><a class="docstring-binding" href="#BiodiversityObservationNetworks.CubeSampling"><code>BiodiversityObservationNetworks.CubeSampling</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">CubeSampling &lt;: BONSampler</code></pre><p>Implements the Cube method for balanced sampling with respect to auxiliary variables.</p><p><strong>Fields</strong></p><ul><li><code>num_nodes::Int</code>: The expected sample size.</li></ul><p><strong>Description</strong></p><p>The algorithm selects a sample such that the Horvitz-Thompson estimates of auxiliary  variables match the population totals as closely as possible. It proceeds in two phases:</p><ol><li><strong>Flight Phase</strong>: Random walk modifying inclusion probabilities while respecting constraints.</li><li><strong>Landing Phase</strong>: Linear programming (using HiGHS) to resolve remaining fractional probabilities.</li></ol><p><strong>References</strong></p><ul><li>Deville, J. C., &amp; Tillé, Y. (2004). Efficient balanced sampling: The cube method.</li></ul></div><a class="docs-sourcelink" target="_blank" href="github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/1c2f4b91f3ea1171eb97b2659b0bccb2d87897d4/src/samplers/cubesampling.jl#L1-L17">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BiodiversityObservationNetworks.DistanceToMedian"><a class="docstring-binding" href="#BiodiversityObservationNetworks.DistanceToMedian"><code>BiodiversityObservationNetworks.DistanceToMedian</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">DistanceToMedian</code></pre><p>Rarity score defined as Euclidean distance in feature space to the per-feature median across the raster stack. Optionally, features can be PCA-transformed prior to z-scoring.</p></div><a class="docs-sourcelink" target="_blank" href="github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/1c2f4b91f3ea1171eb97b2659b0bccb2d87897d4/src/utilities/rarity.jl#L26-L32">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BiodiversityObservationNetworks.GeneralizedRandomTesselated"><a class="docstring-binding" href="#BiodiversityObservationNetworks.GeneralizedRandomTesselated"><code>BiodiversityObservationNetworks.GeneralizedRandomTesselated</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">GeneralizedRandomTesselated</code></pre><p><code>GeneralizedRandomTesselated</code> is a type of <a href="#BiodiversityObservationNetworks.BONSampler"><code>BONSampler</code></a> for generating <a href="#BiodiversityObservationNetworks.BiodiversityObservationNetwork"><code>BiodiversityObservationNetwork</code></a>s with spatial spreading.</p><p>GRTS was initially proposed in (<a href="../../bibliography/#Stevens2004SpaBal">Stevens and Olsen, 2022</a>).</p><p><em>Arguments</em>:</p><ul><li><code>num_nodes</code>: the number of sites to select</li><li><code>grid_size</code>: if being used on a polygon, the dimensions of the grid used to cover the extent. GRTS sampling uses discrete Cartesian indices</li></ul><p>GRTS represents each cell of a rasterized version of the sampling domain using an address, where the address of each cell is represented as a <code>D</code>-digit base-4 number. </p><p>The value of <code>D</code> depends on the size of the raster. GRTS works by recursively splitting the rasterized domain into quadrants, and those quadrants into further quadrants, until a single pixel is reached. At each step, each quadrant is randomly labeled with a number 1, 2, 3, or 4 (without replacement, so all values are used). </p><p>The addresses are then sorted numerically, and the <code>num_nodes</code> smallest values are chosen.</p></div><a class="docs-sourcelink" target="_blank" href="github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/1c2f4b91f3ea1171eb97b2659b0bccb2d87897d4/src/samplers/grts.jl#L1-L28">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BiodiversityObservationNetworks.MoransI"><a class="docstring-binding" href="#BiodiversityObservationNetworks.MoransI"><code>BiodiversityObservationNetworks.MoransI</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">MoransI &lt;: SpatialBalanceMetric</code></pre><p>Computes Moran&#39;s I on the inclusion indicator variable.</p><p><strong>Description</strong></p><p>Calculates spatial autocorrelation of the sample indicator <span>$\delta$</span> (1 if sampled, 0 otherwise). Negative values indicate spatial inhibition (spread), which is desired for balanced sampling.</p></div><a class="docs-sourcelink" target="_blank" href="github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/1c2f4b91f3ea1171eb97b2659b0bccb2d87897d4/src/utilities/spatialbalance.jl#L17-L25">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BiodiversityObservationNetworks.MultivariateEnvironmentalSimilarity"><a class="docstring-binding" href="#BiodiversityObservationNetworks.MultivariateEnvironmentalSimilarity"><code>BiodiversityObservationNetworks.MultivariateEnvironmentalSimilarity</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">MultivariateEnvironmentalSimilarity</code></pre><p>Multivariate Environmental Similarity Surface (MESS). For each cell, compute the minimum over features of a per-feature similarity score derived from the ECDF of the training distribution, following the standard MESS definition.</p></div><a class="docs-sourcelink" target="_blank" href="github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/1c2f4b91f3ea1171eb97b2659b0bccb2d87897d4/src/utilities/rarity.jl#L56-L62">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BiodiversityObservationNetworks.Pivotal"><a class="docstring-binding" href="#BiodiversityObservationNetworks.Pivotal"><code>BiodiversityObservationNetworks.Pivotal</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">Pivotal &lt;: BONSampler</code></pre><p>Implements the Local Pivotal Method (LPM).</p><p><strong>Fields</strong></p><ul><li><code>num_nodes::Int</code>: The number of sites to select.</li></ul><p><strong>Description</strong></p><p>Iteratively pairs nearby units and updates their inclusion probabilities  so that, locally, one unit tends toward selection while the other tends  toward non-selection. Repeating this over the domain produces a sample that  is more spatially balanced than simple random sampling, while respecting  per-unit inclusion probabilities when provided.</p><p>High-level algorithm:</p><ul><li>Select an unfinished unit <code>i</code>; then choose its nearest unfinished neighbor <code>j</code>.</li><li>If <code>πᵢ + πⱼ &lt; 1</code>, move probability mass so one unit goes to 0 and the other to <code>πᵢ+πⱼ</code>.</li><li>Otherwise (if <code>πᵢ + πⱼ ≥ 1</code>), move probability mass so one unit is selected and the other retains the leftover probability <code>πᵢ + πⱼ - 1</code>.</li><li>Repeat until all are complete.</li></ul><p><strong>References</strong></p><ul><li>Grafström, A. (2012).</li></ul></div><a class="docs-sourcelink" target="_blank" href="github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/1c2f4b91f3ea1171eb97b2659b0bccb2d87897d4/src/samplers/pivotal.jl#L1-L24">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BiodiversityObservationNetworks.PolygonDomain"><a class="docstring-binding" href="#BiodiversityObservationNetworks.PolygonDomain"><code>BiodiversityObservationNetworks.PolygonDomain</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">PolygonDomain{T} &lt;: AbstractDomain</code></pre><p>A domain defined by a vector geometry (polygon).</p><p><strong>Fields</strong></p><ul><li><code>data::T</code>: The underlying geometry object.</li></ul></div><a class="docs-sourcelink" target="_blank" href="github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/1c2f4b91f3ea1171eb97b2659b0bccb2d87897d4/src/domains/polygon.jl#L1-L8">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BiodiversityObservationNetworks.RasterDomain"><a class="docstring-binding" href="#BiodiversityObservationNetworks.RasterDomain"><code>BiodiversityObservationNetworks.RasterDomain</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">RasterDomain{T, P} &lt;: AbstractDomain</code></pre><p>A wrapper around a raster-like object (Matrix or SDMLayer) that maintains a &quot;pool&quot; of valid sampling indices.</p><p><strong>Fields</strong></p><ul><li><code>data::T</code>: The underlying raster data (e.g., <code>Matrix</code> or <code>SDMLayer</code>).</li><li><code>pool::P</code>: A collection of valid indices that can be sampled.</li></ul></div><a class="docs-sourcelink" target="_blank" href="github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/1c2f4b91f3ea1171eb97b2659b0bccb2d87897d4/src/domains/raster.jl#L1-L10">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BiodiversityObservationNetworks.RasterStack"><a class="docstring-binding" href="#BiodiversityObservationNetworks.RasterStack"><code>BiodiversityObservationNetworks.RasterStack</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">RasterStack{T} &lt;: AbstractDomain</code></pre><p>A collection of aligned <code>RasterDomain</code>s, used when sampling requires multivariate features.</p><p><strong>Fields</strong></p><ul><li><code>rasters::Vector{&lt;:RasterDomain{&lt;:T}}</code>: The stack of layers.</li><li><code>pool</code>: The intersection of valid pools from all layers.</li></ul></div><a class="docs-sourcelink" target="_blank" href="github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/1c2f4b91f3ea1171eb97b2659b0bccb2d87897d4/src/domains/stack.jl#L1-L9">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BiodiversityObservationNetworks.SimpleRandom"><a class="docstring-binding" href="#BiodiversityObservationNetworks.SimpleRandom"><code>BiodiversityObservationNetworks.SimpleRandom</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">SimpleRandom &lt;: BONSampler</code></pre><p>Implements simple random sampling (SRS) and weighted random sampling.</p><p><strong>Fields</strong></p><ul><li><code>num_nodes::Int</code>: The number of sites to select.</li></ul><p><strong>Description</strong></p><p>Selects <code>num_nodes</code> locations from the domain uniformly at random without replacement.  If an <code>inclusion</code> probability surface is provided, it performs weighted random sampling  without replacement, where the weight of each candidate cell is proportional to its  inclusion probability.</p><p><strong>Notes</strong></p><p>While computationally efficient, Simple Random Sampling does not guarantee spatial  balance and may result in clustering of sampling points.</p></div><a class="docs-sourcelink" target="_blank" href="github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/1c2f4b91f3ea1171eb97b2659b0bccb2d87897d4/src/samplers/simplerandom.jl#L1-L18">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BiodiversityObservationNetworks.SpatiallyCorrelatedPoisson"><a class="docstring-binding" href="#BiodiversityObservationNetworks.SpatiallyCorrelatedPoisson"><code>BiodiversityObservationNetworks.SpatiallyCorrelatedPoisson</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">SpatiallyCorrelatedPoisson &lt;: BONSampler</code></pre><p>Implements Spatially Correlated Poisson Sampling (SCPS).</p><p><strong>Fields</strong></p><ul><li><code>num_nodes::Int</code>: The number of sites to select.</li></ul><p><strong>Description</strong></p><p>Iterates through units, selecting them based on inclusion probabilities, and  dynamically adjusting the probabilities of neighboring units to maintain spatial balance.</p><p><strong>References</strong></p><ul><li>Grafström, A. (2012). Spatially correlated Poisson sampling.</li></ul></div><a class="docs-sourcelink" target="_blank" href="github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/1c2f4b91f3ea1171eb97b2659b0bccb2d87897d4/src/samplers/spatiallycorrelatedpoisson.jl#L1-L15">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BiodiversityObservationNetworks.SpatiallyStratified"><a class="docstring-binding" href="#BiodiversityObservationNetworks.SpatiallyStratified"><code>BiodiversityObservationNetworks.SpatiallyStratified</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">SpatiallyStratified</code></pre><p><code>SpatiallyStratified</code> performs stratified random sampling over discrete categories present in the domain. Each pool element belongs to a stratum given by <code>domain[x]</code>. The number of draws allocated to each stratum is proportional to the stratum size (via the multinomial distribution), and units are then sampled without replacement from each stratum.</p></div><a class="docs-sourcelink" target="_blank" href="github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/1c2f4b91f3ea1171eb97b2659b0bccb2d87897d4/src/samplers/stratified.jl#L1-L8">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BiodiversityObservationNetworks.VoronoiVariance"><a class="docstring-binding" href="#BiodiversityObservationNetworks.VoronoiVariance"><code>BiodiversityObservationNetworks.VoronoiVariance</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">VoronoiVariance</code></pre><p>The <code>VoronoiVariance</code> method for characterizing the spatial balance of a sample is based on the initial method proposed by (<a href="../../bibliography/#Stevens2004SpaBal">Stevens and Olsen, 2022</a>), and then extended by (<a href="../../bibliography/#Grafstrom2012SpaCor">Grafström, 2025</a>).</p><p>For a given <a href="#BiodiversityObservationNetworks.BiodiversityObservationNetwork"><code>BiodiversityObservationNetwork</code></a> <code>bon</code>, the <a href="https://en.wikipedia.org/wiki/Voronoi_diagram">Voronoi tesselation</a> splits the plane into a series of polygons, where the <code>i</code>-th polygon consists of all points in the plane whose nearest node in <code>bon</code> is the <code>i</code>-th node.</p><p>These polygons can then be used to assess the spatial balance of a sample. </p><p>In an <em>ideally</em> balanced sample, the sum of the inclusion probabilities across each polygon <code>i</code> would equal 1, because in expectation exactly one unit would be sampled in that region. </p><p>If we define <span>$v_i$</span> as the total inclusion probability across all elements of the population in Voronoi polygon <code>i</code>, i.e.</p><p class="math-container">\[v_i = \sum_{j \in i} \pi_j \]</p><p>then we can assess the spatial balance of a sample by measuring the distance of <span>$v_i$</span> from 1 for each polygon.  (<a href="../../bibliography/#Grafstrom2012SpaCor">Grafström, 2025</a>) proposes the metric <code>B</code>, defined as </p><p class="math-container">\[B = \frac{1}{n} \sum_{i=1}^n (v_i - 1)^2\]</p><p>to measure spatial balance, where <em>smaller values indicate better spatial balance</em>.</p></div><a class="docs-sourcelink" target="_blank" href="github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/1c2f4b91f3ea1171eb97b2659b0bccb2d87897d4/src/utilities/spatialbalance.jl#L92-L126">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BiodiversityObservationNetworks.contains-Union{Tuple{V}, Tuple{T}, Tuple{PolygonDomain{T}, V}} where {T, V}"><a class="docstring-binding" href="#BiodiversityObservationNetworks.contains-Union{Tuple{V}, Tuple{T}, Tuple{PolygonDomain{T}, V}} where {T, V}"><code>BiodiversityObservationNetworks.contains</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">contains</code></pre></div><a class="docs-sourcelink" target="_blank" href="github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/1c2f4b91f3ea1171eb97b2659b0bccb2d87897d4/src/domains/polygon.jl#L23-L25">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BiodiversityObservationNetworks.extent-Tuple{PolygonDomain{&lt;:SimpleSDMPolygons.AbstractGeometry}}"><a class="docstring-binding" href="#BiodiversityObservationNetworks.extent-Tuple{PolygonDomain{&lt;:SimpleSDMPolygons.AbstractGeometry}}"><code>BiodiversityObservationNetworks.extent</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">extent(p::PolygonDomain{T&lt;:SimpleSDMPolygons.AbstractGeometry})</code></pre></div><a class="docs-sourcelink" target="_blank" href="github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/1c2f4b91f3ea1171eb97b2659b0bccb2d87897d4/src/domains/polygon.jl#L13-L15">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BiodiversityObservationNetworks.extent-Tuple{RasterDomain{&lt;:Matrix}}"><a class="docstring-binding" href="#BiodiversityObservationNetworks.extent-Tuple{RasterDomain{&lt;:Matrix}}"><code>BiodiversityObservationNetworks.extent</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">extent</code></pre></div><a class="docs-sourcelink" target="_blank" href="github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/1c2f4b91f3ea1171eb97b2659b0bccb2d87897d4/src/domains/raster.jl#L83-L85">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BiodiversityObservationNetworks.jensenshannon-Tuple{RasterStack, BiodiversityObservationNetwork}"><a class="docstring-binding" href="#BiodiversityObservationNetworks.jensenshannon-Tuple{RasterStack, BiodiversityObservationNetwork}"><code>BiodiversityObservationNetworks.jensenshannon</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">jensenshannon</code></pre><p>The <a href="https://en.wikipedia.org/wiki/Jensen%E2%80%93Shannon_divergence">Jensen-Shannon Divergence</a> is a method for measuring the distance between two probability distributions.</p><p>This method provides a comparison between the distribution of environmental variables in set of <code>SDMLayers</code>, <code>layers</code>, to the values of those variables at the sites within a <a href="#BiodiversityObservationNetworks.BiodiversityObservationNetwork"><code>BiodiversityObservationNetwork</code></a> <code>bon</code>. </p></div><a class="docs-sourcelink" target="_blank" href="github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/1c2f4b91f3ea1171eb97b2659b0bccb2d87897d4/src/utilities/distances.jl#L28-L39">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BiodiversityObservationNetworks.rarity-Tuple{DistanceToAnalogNode, BiodiversityObservationNetwork, RasterStack}"><a class="docstring-binding" href="#BiodiversityObservationNetworks.rarity-Tuple{DistanceToAnalogNode, BiodiversityObservationNetwork, RasterStack}"><code>BiodiversityObservationNetworks.rarity</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">rarity(::DistanceToAnalogNode, bon, layers; pca=false)</code></pre><p>For each cell, compute the distance in z-scored feature space to the nearest selected BON node in <code>layers</code>. Optionally apply a shared PCA transform first.</p></div><a class="docs-sourcelink" target="_blank" href="github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/1c2f4b91f3ea1171eb97b2659b0bccb2d87897d4/src/utilities/rarity.jl#L99-L104">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BiodiversityObservationNetworks.rarity-Tuple{WithinRange, BiodiversityObservationNetwork, RasterStack}"><a class="docstring-binding" href="#BiodiversityObservationNetworks.rarity-Tuple{WithinRange, BiodiversityObservationNetwork, RasterStack}"><code>BiodiversityObservationNetworks.rarity</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">rarity(::WithinRange, bon, layers)</code></pre><p>Boolean rarity surface indicating whether each cell lies within the hyper- rectangle spanned by the per-feature minima and maxima of the BON nodes.</p></div><a class="docs-sourcelink" target="_blank" href="github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/1c2f4b91f3ea1171eb97b2659b0bccb2d87897d4/src/utilities/rarity.jl#L149-L154">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BiodiversityObservationNetworks.sample-Tuple{}"><a class="docstring-binding" href="#BiodiversityObservationNetworks.sample-Tuple{}"><code>BiodiversityObservationNetworks.sample</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">sample</code></pre></div><a class="docs-sourcelink" target="_blank" href="github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/1c2f4b91f3ea1171eb97b2659b0bccb2d87897d4/src/sample.jl#L14-L16">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BiodiversityObservationNetworks.spatialbalance-Tuple{MoransI, BiodiversityObservationNetwork, RasterDomain}"><a class="docstring-binding" href="#BiodiversityObservationNetworks.spatialbalance-Tuple{MoransI, BiodiversityObservationNetwork, RasterDomain}"><code>BiodiversityObservationNetworks.spatialbalance</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">spatialbalance(::MoransI, raster::SDMLayer, bon::BiodiversityObservationNetwork)</code></pre></div><a class="docs-sourcelink" target="_blank" href="github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/1c2f4b91f3ea1171eb97b2659b0bccb2d87897d4/src/utilities/spatialbalance.jl#L56-L58">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BiodiversityObservationNetworks.spatialbalance-Tuple{VoronoiVariance, BiodiversityObservationNetwork, PolygonDomain}"><a class="docstring-binding" href="#BiodiversityObservationNetworks.spatialbalance-Tuple{VoronoiVariance, BiodiversityObservationNetwork, PolygonDomain}"><code>BiodiversityObservationNetworks.spatialbalance</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">spatialbalance(::Type{VoronoiVariance}, bon::BiodiversityObservationNetwork, geom)</code></pre></div><a class="docs-sourcelink" target="_blank" href="github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/1c2f4b91f3ea1171eb97b2659b0bccb2d87897d4/src/utilities/spatialbalance.jl#L131-L133">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BiodiversityObservationNetworks.spatialbalance-Union{Tuple{T}, Tuple{Type{T}, Any, Any}} where T"><a class="docstring-binding" href="#BiodiversityObservationNetworks.spatialbalance-Union{Tuple{T}, Tuple{Type{T}, Any, Any}} where T"><code>BiodiversityObservationNetworks.spatialbalance</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">spatialbalance(metric::SpatialBalanceMetric, bon, domain)</code></pre><p>Calculate a specific spatial balance metric for a given network and domain.</p></div><a class="docs-sourcelink" target="_blank" href="github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/1c2f4b91f3ea1171eb97b2659b0bccb2d87897d4/src/utilities/spatialbalance.jl#L3-L7">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BiodiversityObservationNetworks.voronoi-Tuple{Any, Any}"><a class="docstring-binding" href="#BiodiversityObservationNetworks.voronoi-Tuple{Any, Any}"><code>BiodiversityObservationNetworks.voronoi</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">voronoi(bon, domain)</code></pre><p>Construct Voronoi polygons for the nodes in a <code>BiodiversityObservationNetwork</code> within the given domain. The domain is coerced to a <code>PolygonDomain</code> when needed. Output polygons are clipped to the domain extent.</p></div><a class="docs-sourcelink" target="_blank" href="github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/1c2f4b91f3ea1171eb97b2659b0bccb2d87897d4/src/utilities/voronoi.jl#L1-L8">source</a></section></details></article><h1 id="Private-API"><a class="docs-heading-anchor" href="#Private-API">Private API</a><a id="Private-API-1"></a><a class="docs-heading-anchor-permalink" href="#Private-API" title="Permalink"></a></h1><article><details class="docstring" open="true"><summary id="BiodiversityObservationNetworks.RarityMetric"><a class="docstring-binding" href="#BiodiversityObservationNetworks.RarityMetric"><code>BiodiversityObservationNetworks.RarityMetric</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">RarityMetric</code></pre><p>Abstract type encompassing all methods for computing environmental rarity.</p></div><a class="docs-sourcelink" target="_blank" href="github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/1c2f4b91f3ea1171eb97b2659b0bccb2d87897d4/src/utilities/rarity.jl#L1-L5">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BiodiversityObservationNetworks._2d_bas-Tuple{Any, Any}"><a class="docstring-binding" href="#BiodiversityObservationNetworks._2d_bas-Tuple{Any, Any}"><code>BiodiversityObservationNetworks._2d_bas</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">_2d_bas(sampler, domain)</code></pre><p>2D BAS using Halton bases <code>[2,3]</code> to generate spatially spread candidate cells, accepting those that fall on unmasked locations until <code>num_nodes</code> are selected.</p></div><a class="docs-sourcelink" target="_blank" href="github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/1c2f4b91f3ea1171eb97b2659b0bccb2d87897d4/src/samplers/balancedacceptance.jl#L78-L83">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BiodiversityObservationNetworks._3d_bas-Tuple{Any, Any, Any}"><a class="docstring-binding" href="#BiodiversityObservationNetworks._3d_bas-Tuple{Any, Any, Any}"><code>BiodiversityObservationNetworks._3d_bas</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">_3d_bas(sampler, domain, inclusion)</code></pre><p>3D BAS using Halton bases <code>[2,3,5]</code>. A candidate <code>(i,j,z)</code> is accepted if the cell is unmasked and <code>z &lt; inclusion[i,j]</code>.</p></div><a class="docs-sourcelink" target="_blank" href="github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/1c2f4b91f3ea1171eb97b2659b0bccb2d87897d4/src/samplers/balancedacceptance.jl#L55-L60">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BiodiversityObservationNetworks._above_one_update!-NTuple{6, Any}"><a class="docstring-binding" href="#BiodiversityObservationNetworks._above_one_update!-NTuple{6, Any}"><code>BiodiversityObservationNetworks._above_one_update!</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">_above_one_update!(inclusion, pool, i, j, complete_flags, inclusion_flags)</code></pre><p>Apply the LPM update when the paired units have <code>πᵢ + πⱼ ≥ 1</code>.</p><p>One of the two units is set to 1 (selected) and the other is reduced to <code>πᵢ + πⱼ - 1</code>. The unit whose probability reaches 1 is marked both as included (<code>inclusion_flags</code>) and complete (<code>complete_flags</code>).</p></div><a class="docs-sourcelink" target="_blank" href="github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/1c2f4b91f3ea1171eb97b2659b0bccb2d87897d4/src/samplers/pivotal.jl#L29-L35">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BiodiversityObservationNetworks._aggregate_pool-Tuple{Any}"><a class="docstring-binding" href="#BiodiversityObservationNetworks._aggregate_pool-Tuple{Any}"><code>BiodiversityObservationNetworks._aggregate_pool</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">_aggregate_pool(domains)</code></pre><p>Compute the intersection of valid sampling pools across multiple domains.</p><p><strong>Arguments</strong></p><ul><li><code>domains</code>: An iterable collection of domain objects (e.g., a vector of <code>RasterDomain</code>).  Each element must have a <code>pool</code> field containing a boolean mask.</li></ul><p><strong>Returns</strong></p><ul><li>A <code>BitArray</code> representing the intersection of all pools. A cell  is considered valid (<code>true</code>) only if it is valid in <em>all</em> provided domains.</li></ul><p><strong>Description</strong></p><p>This internal utility is primarily used when constructing a <code>RasterStack</code>. It ensures  that sampling only occurs in locations that are valid across every layer in the stack  (e.g., avoiding <code>NaN</code>s, missing data, or masked areas present in any single layer).</p></div><a class="docs-sourcelink" target="_blank" href="github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/1c2f4b91f3ea1171eb97b2659b0bccb2d87897d4/src/domains/stack.jl#L53-L70">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BiodiversityObservationNetworks._apply_update_rule!-NTuple{6, Any}"><a class="docstring-binding" href="#BiodiversityObservationNetworks._apply_update_rule!-NTuple{6, Any}"><code>BiodiversityObservationNetworks._apply_update_rule!</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">_apply_update_rule!(inclusion, pool, i, j, inclusion_flags, complete_flags)</code></pre><p>Dispatch to the appropriate LPM update based on whether <code>πᵢ + πⱼ</code> is below or at/above one.</p></div><a class="docs-sourcelink" target="_blank" href="github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/1c2f4b91f3ea1171eb97b2659b0bccb2d87897d4/src/samplers/pivotal.jl#L65-L70">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BiodiversityObservationNetworks._below_one_update!-NTuple{5, Any}"><a class="docstring-binding" href="#BiodiversityObservationNetworks._below_one_update!-NTuple{5, Any}"><code>BiodiversityObservationNetworks._below_one_update!</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">_below_one_update!(inclusion, pool, i, j, complete_flags)</code></pre><p>Apply the LPM update when the paired units have <code>πᵢ + πⱼ &lt; 1</code>.</p><p>One of the two units is set to 0 (not selected) and the other is increased to <code>πᵢ + πⱼ</code>. The unit whose probability reaches 0 is marked complete.</p></div><a class="docs-sourcelink" target="_blank" href="github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/1c2f4b91f3ea1171eb97b2659b0bccb2d87897d4/src/samplers/pivotal.jl#L47-L54">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BiodiversityObservationNetworks._cube_flight_phase-Tuple{Any, Any}"><a class="docstring-binding" href="#BiodiversityObservationNetworks._cube_flight_phase-Tuple{Any, Any}"><code>BiodiversityObservationNetworks._cube_flight_phase</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">_cube_flight_phase(πₖ, x)</code></pre><p>Run the flight phase of the cube method.</p><p><code>πₖ</code> are current inclusion probabilities; <code>x</code> (auxiliary matrix) is augmented with a first row of <code>πₖ&#39;</code> so sample size fixed. The method repeatedly finds a direction in the null space of the constraint matrix and pushes a small subset of probabilities to 0 or 1 while preserving balances in expectation.</p></div><a class="docs-sourcelink" target="_blank" href="github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/1c2f4b91f3ea1171eb97b2659b0bccb2d87897d4/src/samplers/cubesampling.jl#L90-L98">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BiodiversityObservationNetworks._cube_landing_phase-Tuple{Any, Any, Any}"><a class="docstring-binding" href="#BiodiversityObservationNetworks._cube_landing_phase-Tuple{Any, Any, Any}"><code>BiodiversityObservationNetworks._cube_landing_phase</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">_cube_landing_phase(pikstar, πₖ, x)</code></pre><p>Run the landing phase if some probabilities are still fractional after flight. Formulate a small linear program over the fractional units to select a 0/1 sample whose auxiliary totals match <code>pikstar</code> in expectation with minimal cost <code>C(s)</code> (per Deville &amp; Tillé, 2004).</p></div><a class="docs-sourcelink" target="_blank" href="github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/1c2f4b91f3ea1171eb97b2659b0bccb2d87897d4/src/samplers/cubesampling.jl#L192-L199">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BiodiversityObservationNetworks._get_address_length-Tuple{Any, Any}"><a class="docstring-binding" href="#BiodiversityObservationNetworks._get_address_length-Tuple{Any, Any}"><code>BiodiversityObservationNetworks._get_address_length</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">_get_address_length</code></pre><p>Returns the number of digits in a <a href="@ref"><code>GeneralizedRandomTessellatedStratified</code></a> address for a specific geometry, computed based on the raster dimensions. </p></div><a class="docs-sourcelink" target="_blank" href="github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/1c2f4b91f3ea1171eb97b2659b0bccb2d87897d4/src/samplers/grts.jl#L80-L85">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BiodiversityObservationNetworks._get_addresses-Tuple{Any, Any}"><a class="docstring-binding" href="#BiodiversityObservationNetworks._get_addresses-Tuple{Any, Any}"><code>BiodiversityObservationNetworks._get_addresses</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">_get_addresses()</code></pre></div><a class="docs-sourcelink" target="_blank" href="github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/1c2f4b91f3ea1171eb97b2659b0bccb2d87897d4/src/samplers/grts.jl#L88-L90">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BiodiversityObservationNetworks._h-Tuple{Any}"><a class="docstring-binding" href="#BiodiversityObservationNetworks._h-Tuple{Any}"><code>BiodiversityObservationNetworks._h</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">_h(K)</code></pre><p>Entropy-like diversity score based on the log-determinant of the kernel matrix <code>K</code>. Larger values encourage selecting points that are diverse with respect to previously chosen sites.</p></div><a class="docs-sourcelink" target="_blank" href="github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/1c2f4b91f3ea1171eb97b2659b0bccb2d87897d4/src/samplers/adaptivehotspot.jl#L86-L92">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BiodiversityObservationNetworks._matérn-Tuple{Any, Any, Any}"><a class="docstring-binding" href="#BiodiversityObservationNetworks._matérn-Tuple{Any, Any, Any}"><code>BiodiversityObservationNetworks._matérn</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">_matérn(d, ρ, ν)</code></pre><p>Matérn covariance kernel evaluated at distance <code>d</code>, range <code>ρ</code>, smoothness <code>ν</code>. Normalized so that <code>_matérn(0, ρ, ν) == 1</code>.</p></div><a class="docs-sourcelink" target="_blank" href="github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/1c2f4b91f3ea1171eb97b2659b0bccb2d87897d4/src/samplers/adaptivehotspot.jl#L73-L78">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BiodiversityObservationNetworks._pick_nodes-Tuple{Any, Any, Any}"><a class="docstring-binding" href="#BiodiversityObservationNetworks._pick_nodes-Tuple{Any, Any, Any}"><code>BiodiversityObservationNetworks._pick_nodes</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">_pick_nodes(sampler, raster, addresses)</code></pre></div><a class="docs-sourcelink" target="_blank" href="github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/1c2f4b91f3ea1171eb97b2659b0bccb2d87897d4/src/samplers/grts.jl#L104-L106">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BiodiversityObservationNetworks._quadrant_fill!-Tuple{Any}"><a class="docstring-binding" href="#BiodiversityObservationNetworks._quadrant_fill!-Tuple{Any}"><code>BiodiversityObservationNetworks._quadrant_fill!</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">_quadrant_fill!(mat)</code></pre><p>Takes a matrix <code>mat</code> and splits it into quadrants randomly labeled one through four. </p></div><a class="docs-sourcelink" target="_blank" href="github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/1c2f4b91f3ea1171eb97b2659b0bccb2d87897d4/src/samplers/grts.jl#L44-L48">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BiodiversityObservationNetworks._quadrant_split!-Tuple{Any, Any}"><a class="docstring-binding" href="#BiodiversityObservationNetworks._quadrant_split!-Tuple{Any, Any}"><code>BiodiversityObservationNetworks._quadrant_split!</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">_quadrant_split!(mat, grid_size)</code></pre><p>Splits a matrix <code>mat</code> into nested quadrants, where the side-length of a submatrix to be split into quadrants is given by <code>grid_size</code>.  </p></div><a class="docs-sourcelink" target="_blank" href="github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/1c2f4b91f3ea1171eb97b2659b0bccb2d87897d4/src/samplers/grts.jl#L61-L66">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BiodiversityObservationNetworks._redistribute_masked_weight!-Tuple{Any, RasterDomain{&lt;:Matrix}}"><a class="docstring-binding" href="#BiodiversityObservationNetworks._redistribute_masked_weight!-Tuple{Any, RasterDomain{&lt;:Matrix}}"><code>BiodiversityObservationNetworks._redistribute_masked_weight!</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">_redistribute_masked_weight!(domain, inclusion::RasterDomain{&lt;:Matrix})</code></pre><p>Matrix-backed variant of masked weight redistribution.</p></div><a class="docs-sourcelink" target="_blank" href="github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/1c2f4b91f3ea1171eb97b2659b0bccb2d87897d4/src/inclusion.jl#L48-L52">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BiodiversityObservationNetworks._redistribute_masked_weight!-Tuple{Any, RasterDomain{&lt;:SimpleSDMLayers.SDMLayer}}"><a class="docstring-binding" href="#BiodiversityObservationNetworks._redistribute_masked_weight!-Tuple{Any, RasterDomain{&lt;:SimpleSDMLayers.SDMLayer}}"><code>BiodiversityObservationNetworks._redistribute_masked_weight!</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">_redistribute_masked_weight!(domain, inclusion::RasterDomain{&lt;:SDMLayer})</code></pre><p>Redistribute any probability mass assigned to masked-out cells uniformly across valid indices in <code>domain</code>. Mutates <code>inclusion</code> in-place.</p></div><a class="docs-sourcelink" target="_blank" href="github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/1c2f4b91f3ea1171eb97b2659b0bccb2d87897d4/src/inclusion.jl#L32-L37">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BiodiversityObservationNetworks._rescale_node-Tuple{Any, Real, Real}"><a class="docstring-binding" href="#BiodiversityObservationNetworks._rescale_node-Tuple{Any, Real, Real}"><code>BiodiversityObservationNetworks._rescale_node</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">_rescale_node(domain, x::Real, y::Real)</code></pre><p>Map unit-cube Halton coordinates <code>(x, y)</code> to integer raster indices in <code>domain</code>.</p></div><a class="docs-sourcelink" target="_blank" href="github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/1c2f4b91f3ea1171eb97b2659b0bccb2d87897d4/src/samplers/balancedacceptance.jl#L25-L29">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BiodiversityObservationNetworks._sample-Tuple{BalancedAcceptance, Any}"><a class="docstring-binding" href="#BiodiversityObservationNetworks._sample-Tuple{BalancedAcceptance, Any}"><code>BiodiversityObservationNetworks._sample</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">_sample(sampler::BalancedAcceptance, domain; inclusion=nothing)</code></pre><p>Generate a spatially balanced sample using BAS. With <code>inclusion</code>, perform 3D BAS to respect per-cell probabilities; otherwise perform 2D BAS over the mask.</p></div><a class="docs-sourcelink" target="_blank" href="github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/1c2f4b91f3ea1171eb97b2659b0bccb2d87897d4/src/samplers/balancedacceptance.jl#L36-L41">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BiodiversityObservationNetworks._sample-Tuple{CubeSampling, Any}"><a class="docstring-binding" href="#BiodiversityObservationNetworks._sample-Tuple{CubeSampling, Any}"><code>BiodiversityObservationNetworks._sample</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">_sample(sampler::CubeSampling, domain; inclusion=nothing)</code></pre><p>Draw a sample using the cube method, balancing means of auxiliary variables (<code>getfeatures(domain)</code>) while achieving the desired sample size in expectation.</p><p>Arguments:</p><ul><li><code>sampler.num_nodes</code>: desired number of selected sites</li><li><code>domain</code>: sampling domain; must support <code>getpool(domain)</code> and <code>getfeatures(domain)</code></li><li><code>inclusion</code>: optional vector/array of inclusion probabilities indexed by pool items</li></ul><p>Returns a <code>BiodiversityObservationNetwork</code>.</p></div><a class="docs-sourcelink" target="_blank" href="github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/1c2f4b91f3ea1171eb97b2659b0bccb2d87897d4/src/samplers/cubesampling.jl#L22-L34">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BiodiversityObservationNetworks._sample-Tuple{Pivotal, Any}"><a class="docstring-binding" href="#BiodiversityObservationNetworks._sample-Tuple{Pivotal, Any}"><code>BiodiversityObservationNetworks._sample</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">_sample(sampler::Pivotal, domain; inclusion=nothing)</code></pre><p>Draw a spatially balanced sample using the Local Pivotal Method.</p><p>Arguments:</p><ul><li><code>sampler.num_nodes</code>: desired number of selected sites (also used to derive a uniform inclusion vector when <code>inclusion</code> is not provided)</li><li><code>domain</code>: sampling domain; must support <code>getpool(domain)</code> and <code>getnearestneighbors(domain)</code></li><li><code>inclusion</code>: optional vector/array of inclusion probabilities indexed by pool items; if <code>nothing</code>, uniform probabilities are computed via <code>get_uniform_inclusion</code>.</li></ul><p>Returns a <code>BiodiversityObservationNetwork</code> with nodes whose final inclusion indicators are 1 after the LPM iterations.</p></div><a class="docs-sourcelink" target="_blank" href="github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/1c2f4b91f3ea1171eb97b2659b0bccb2d87897d4/src/samplers/pivotal.jl#L81-L95">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BiodiversityObservationNetworks._sample-Tuple{SpatiallyCorrelatedPoisson, Any}"><a class="docstring-binding" href="#BiodiversityObservationNetworks._sample-Tuple{SpatiallyCorrelatedPoisson, Any}"><code>BiodiversityObservationNetworks._sample</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">_sample(sampler::SpatiallyCorrelatedPoisson, domain, inclusion_probs)</code></pre><p>Perform Spatially Correlated Poisson sampling following Grafström (2012).</p><p><strong>Arguments</strong></p><ul><li><code>sampler::SpatiallyCorrelatedPoisson</code>: The sampling strategy object.</li><li><code>domain</code>: The spatial domain (supports <code>size(domain)</code> and distance calculation).</li><li><code>inclusion_probs</code>: Initial inclusion probabilities for each unit.       Defaults to uniform: <code>(number_of_nodes / N)</code> for all units.</li></ul><p><strong>Returns</strong></p><ul><li>A <a href="@ref"><code>BiodiversityObservationNetwork.jl</code></a> containing units included in the sample.</li></ul><p><strong>Example Usage</strong></p><p><code>sample(SpatiallyCorrelatedPoisson(), zeros(30,20))</code></p></div><a class="docs-sourcelink" target="_blank" href="github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/1c2f4b91f3ea1171eb97b2659b0bccb2d87897d4/src/samplers/spatiallycorrelatedpoisson.jl#L28-L44">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BiodiversityObservationNetworks._sample-Tuple{SpatiallyStratified, Any}"><a class="docstring-binding" href="#BiodiversityObservationNetworks._sample-Tuple{SpatiallyStratified, Any}"><code>BiodiversityObservationNetworks._sample</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">_sample(sampler::SpatiallyStratified, domain; inclusion=nothing)</code></pre><p>Draw a stratified random sample across unique values in <code>domain</code>.</p><p>Arguments:</p><ul><li><code>sampler.num_nodes</code>: total number of units to sample across all strata</li><li><code>domain</code>: sampling domain; must support <code>getpool(domain)</code> and indexing <code>domain[x]</code></li></ul><p>Returns a <code>BiodiversityObservationNetwork</code>.</p></div><a class="docs-sourcelink" target="_blank" href="github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/1c2f4b91f3ea1171eb97b2659b0bccb2d87897d4/src/samplers/stratified.jl#L14-L24">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BiodiversityObservationNetworks._sort_features_by_mahalanobis-Tuple{Any, Any}"><a class="docstring-binding" href="#BiodiversityObservationNetworks._sort_features_by_mahalanobis-Tuple{Any, Any}"><code>BiodiversityObservationNetworks._sort_features_by_mahalanobis</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">_sort_features_by_mahalanobis(features, inclusion)</code></pre><p>Order units to stabilize the flight phase by spreading early decisions across feature space. Units are sorted by Mahalanobis distance from the inclusion- weighted mean feature vector.</p></div><a class="docs-sourcelink" target="_blank" href="github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/1c2f4b91f3ea1171eb97b2659b0bccb2d87897d4/src/samplers/cubesampling.jl#L69-L75">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BiodiversityObservationNetworks._standardize-Tuple{Any, Any}"><a class="docstring-binding" href="#BiodiversityObservationNetworks._standardize-Tuple{Any, Any}"><code>BiodiversityObservationNetworks._standardize</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">_standardize</code></pre><p>Standardizes the values of a matrix of predictors across the entire population <code>Xfull</code>, and a set of predictors associated with the sampled sites, <code>Xsampled</code> by scaling each predictor to [0,1].</p><p><code>Xsampled</code> is standardized based on the minimum and maximum values of each predictor across the population, so both matrices a return on the same scale.</p><p><em>Arguments</em>:</p><ul><li><code>Xfull</code>: an <code>n</code> x <code>d</code> matrix, where <code>n</code> is the size of the population, and <code>d</code> is the number of predictors</li><li><code>Xsampled</code>: an <code>m</code> x <code>d</code> matrix, where <code>m</code> &lt; <code>n</code> is the size of the sample</li></ul></div><a class="docs-sourcelink" target="_blank" href="github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/1c2f4b91f3ea1171eb97b2659b0bccb2d87897d4/src/utilities/distances.jl#L1-L16">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BiodiversityObservationNetworks._update_psi-Tuple{Any, Any}"><a class="docstring-binding" href="#BiodiversityObservationNetworks._update_psi-Tuple{Any, Any}"><code>BiodiversityObservationNetworks._update_psi</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">_update_psi(Ψ, B)</code></pre><p>Given current working vector <code>Ψ</code> and constraint block <code>B</code>, compute a feasible update along a null-space direction <code>u</code> by maximizing step sizes <code>λ₁, λ₂</code> that keep probabilities within [0,1].</p></div><a class="docs-sourcelink" target="_blank" href="github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/1c2f4b91f3ea1171eb97b2659b0bccb2d87897d4/src/samplers/cubesampling.jl#L148-L154">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BiodiversityObservationNetworks.convert_inclusion-Tuple{Any, Any, Nothing}"><a class="docstring-binding" href="#BiodiversityObservationNetworks.convert_inclusion-Tuple{Any, Any, Nothing}"><code>BiodiversityObservationNetworks.convert_inclusion</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">convert_inclusion(sampler, domain, inclusion; kwargs...)</code></pre><p>Coerce an <code>inclusion</code> specification to a representation compatible with <code>domain</code>. Also ensures totals sum to <code>sampler.num_nodes</code> (renormalizing if needed) and redistributes probability assigned to masked-out cells back to valid cells. Returns <code>nothing</code> when <code>inclusion</code> is <code>nothing</code>.</p></div><a class="docs-sourcelink" target="_blank" href="github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/1c2f4b91f3ea1171eb97b2659b0bccb2d87897d4/src/inclusion.jl#L89-L96">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BiodiversityObservationNetworks.convert_mask-Tuple{RasterDomain, AbstractMatrix}"><a class="docstring-binding" href="#BiodiversityObservationNetworks.convert_mask-Tuple{RasterDomain, AbstractMatrix}"><code>BiodiversityObservationNetworks.convert_mask</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">convert_mask(domain::RasterDomain, mask::AbstractMatrix; kwargs...)</code></pre><p>Convert a boolean matrix mask to a <code>RasterDomain</code>-aligned mask.</p></div><a class="docs-sourcelink" target="_blank" href="github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/1c2f4b91f3ea1171eb97b2659b0bccb2d87897d4/src/mask.jl#L20-L24">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BiodiversityObservationNetworks.convert_mask-Tuple{RasterDomain, PolygonDomain}"><a class="docstring-binding" href="#BiodiversityObservationNetworks.convert_mask-Tuple{RasterDomain, PolygonDomain}"><code>BiodiversityObservationNetworks.convert_mask</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">convert_mask(domain::RasterDomain, mask::PolygonDomain; kwargs...)</code></pre><p>Rasterize a polygon mask into the grid of <code>domain</code> and return a <code>RasterDomain</code>-aligned mask.</p></div><a class="docs-sourcelink" target="_blank" href="github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/1c2f4b91f3ea1171eb97b2659b0bccb2d87897d4/src/mask.jl#L71-L76">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BiodiversityObservationNetworks.convert_mask-Tuple{RasterDomain, SimpleSDMLayers.SDMLayer}"><a class="docstring-binding" href="#BiodiversityObservationNetworks.convert_mask-Tuple{RasterDomain, SimpleSDMLayers.SDMLayer}"><code>BiodiversityObservationNetworks.convert_mask</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">convert_mask(domain::RasterDomain, mask::SDMLayer; kwargs...)</code></pre><p>Convert an <code>SDMLayer</code> to a <code>RasterDomain</code> mask with aligned indices.</p></div><a class="docs-sourcelink" target="_blank" href="github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/1c2f4b91f3ea1171eb97b2659b0bccb2d87897d4/src/mask.jl#L30-L34">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BiodiversityObservationNetworks.convert_mask-Tuple{RasterDomain, SimpleSDMPolygons.AbstractGeometry}"><a class="docstring-binding" href="#BiodiversityObservationNetworks.convert_mask-Tuple{RasterDomain, SimpleSDMPolygons.AbstractGeometry}"><code>BiodiversityObservationNetworks.convert_mask</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">convert_mask(domain::RasterDomain, mask::SimpleSDMPolygons.AbstractGeometry)</code></pre><p>Coerce a polygon geometry to a <code>RasterDomain</code> mask by rasterizing the polygon.</p></div><a class="docs-sourcelink" target="_blank" href="github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/1c2f4b91f3ea1171eb97b2659b0bccb2d87897d4/src/mask.jl#L62-L66">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BiodiversityObservationNetworks.convert_mask-Tuple{RasterDomain{&lt;:SimpleSDMLayers.SDMLayer}, RasterDomain{&lt;:SimpleSDMLayers.SDMLayer}}"><a class="docstring-binding" href="#BiodiversityObservationNetworks.convert_mask-Tuple{RasterDomain{&lt;:SimpleSDMLayers.SDMLayer}, RasterDomain{&lt;:SimpleSDMLayers.SDMLayer}}"><code>BiodiversityObservationNetworks.convert_mask</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">convert_mask(domain::RasterDomain{&lt;:SDMLayer}, mask::RasterDomain{&lt;:SDMLayer}; kwargs...)</code></pre><p>Validate size, extent, and CRS when both domain and mask are SDMLayer-backed.</p></div><a class="docs-sourcelink" target="_blank" href="github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/1c2f4b91f3ea1171eb97b2659b0bccb2d87897d4/src/mask.jl#L39-L43">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BiodiversityObservationNetworks.convert_mask-Union{Tuple{T}, Tuple{RasterDomain{T}, RasterDomain{&lt;:Matrix}}} where T&lt;:(Union{var&quot;#s19&quot;, var&quot;#s20&quot;} where {var&quot;#s19&quot;&lt;:SimpleSDMLayers.SDMLayer, var&quot;#s20&quot;&lt;:(Matrix)})"><a class="docstring-binding" href="#BiodiversityObservationNetworks.convert_mask-Union{Tuple{T}, Tuple{RasterDomain{T}, RasterDomain{&lt;:Matrix}}} where T&lt;:(Union{var&quot;#s19&quot;, var&quot;#s20&quot;} where {var&quot;#s19&quot;&lt;:SimpleSDMLayers.SDMLayer, var&quot;#s20&quot;&lt;:(Matrix)})"><code>BiodiversityObservationNetworks.convert_mask</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">convert_mask(domain::RasterDomain{T}, mask::RasterDomain{&lt;:Matrix}; kwargs...) where T</code></pre><p>Validate size when the mask is matrix-backed.</p></div><a class="docs-sourcelink" target="_blank" href="github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/1c2f4b91f3ea1171eb97b2659b0bccb2d87897d4/src/mask.jl#L52-L56">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BiodiversityObservationNetworks.convert_node-Tuple{RasterDomain{&lt;:Matrix}, Any}"><a class="docstring-binding" href="#BiodiversityObservationNetworks.convert_node-Tuple{RasterDomain{&lt;:Matrix}, Any}"><code>BiodiversityObservationNetworks.convert_node</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">convert_node</code></pre></div><a class="docs-sourcelink" target="_blank" href="github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/1c2f4b91f3ea1171eb97b2659b0bccb2d87897d4/src/domains/raster.jl#L97-L99">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BiodiversityObservationNetworks.convert_nodes-Tuple{RasterDomain, Any}"><a class="docstring-binding" href="#BiodiversityObservationNetworks.convert_nodes-Tuple{RasterDomain, Any}"><code>BiodiversityObservationNetworks.convert_nodes</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">convert_nodes</code></pre></div><a class="docs-sourcelink" target="_blank" href="github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/1c2f4b91f3ea1171eb97b2659b0bccb2d87897d4/src/domains/raster.jl#L103-L105">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BiodiversityObservationNetworks.crs-Tuple{RasterDomain{&lt;:Matrix}}"><a class="docstring-binding" href="#BiodiversityObservationNetworks.crs-Tuple{RasterDomain{&lt;:Matrix}}"><code>BiodiversityObservationNetworks.crs</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">crs</code></pre></div><a class="docs-sourcelink" target="_blank" href="github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/1c2f4b91f3ea1171eb97b2659b0bccb2d87897d4/src/domains/raster.jl#L90-L92">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BiodiversityObservationNetworks.get_uniform_inclusion-Tuple{Any, BiodiversityObservationNetwork}"><a class="docstring-binding" href="#BiodiversityObservationNetworks.get_uniform_inclusion-Tuple{Any, BiodiversityObservationNetwork}"><code>BiodiversityObservationNetworks.get_uniform_inclusion</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">get_uniform_inclusion(sampler, bon::BiodiversityObservationNetwork)</code></pre><p>Construct a uniform inclusion vector for a BON-like domain.</p></div><a class="docs-sourcelink" target="_blank" href="github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/1c2f4b91f3ea1171eb97b2659b0bccb2d87897d4/src/inclusion.jl#L18-L22">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BiodiversityObservationNetworks.get_uniform_inclusion-Union{Tuple{T}, Tuple{Any, T}} where T&lt;:Union{RasterDomain, RasterStack}"><a class="docstring-binding" href="#BiodiversityObservationNetworks.get_uniform_inclusion-Union{Tuple{T}, Tuple{Any, T}} where T&lt;:Union{RasterDomain, RasterStack}"><code>BiodiversityObservationNetworks.get_uniform_inclusion</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">get_uniform_inclusion(sampler, domain)</code></pre><p>Construct a uniform inclusion surface for <code>domain</code> such that the sum of inclusion probabilities equals <code>sampler.num_nodes</code>.</p><p>Returns a <code>RasterDomain</code> when given a raster-like domain.</p></div><a class="docs-sourcelink" target="_blank" href="github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/1c2f4b91f3ea1171eb97b2659b0bccb2d87897d4/src/inclusion.jl#L1-L8">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BiodiversityObservationNetworks.getcoordinates-Tuple{BiodiversityObservationNetwork}"><a class="docstring-binding" href="#BiodiversityObservationNetworks.getcoordinates-Tuple{BiodiversityObservationNetwork}"><code>BiodiversityObservationNetworks.getcoordinates</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">getcoordinates</code></pre></div><a class="docs-sourcelink" target="_blank" href="github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/1c2f4b91f3ea1171eb97b2659b0bccb2d87897d4/src/domains/bon.jl#L39-L41">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BiodiversityObservationNetworks.getcoordinates-Tuple{RasterDomain{&lt;:Matrix}}"><a class="docstring-binding" href="#BiodiversityObservationNetworks.getcoordinates-Tuple{RasterDomain{&lt;:Matrix}}"><code>BiodiversityObservationNetworks.getcoordinates</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">getcoordinates(domain)</code></pre><p>Retrieve the spatial coordinates of all valid (unmasked) sampling locations in the domain.</p><p><strong>Arguments</strong></p><ul><li><code>domain</code>: A <code>RasterDomain</code> or a <code>RasterStack</code>.</li></ul><p><strong>Returns</strong></p><ul><li>A <code>2 x N</code> Matrix{Float32}, where <code>N</code> is the number of valid locations in the pool, </li></ul><p>where each column is a coordinate in the valid pool of locations.</p><p><strong>Description</strong></p><p>Returns a matrix of coordinates corresponding to the valid sampling pool. </p><ul><li>For <strong>Matrix-backed domains</strong>, coordinates are the integer column (x) and row (y) indices.</li><li>For <strong>SDMLayer-backed domains</strong>, coordinates are the projected spatial coordinates  (e.g., Longitude/Latitude) derived from the layer&#39;s geotransform.</li><li>For <strong>RasterStacks</strong>, coordinates are derived from the first layer in the stack  (assuming all layers share the same grid).</li></ul></div><a class="docs-sourcelink" target="_blank" href="github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/1c2f4b91f3ea1171eb97b2659b0bccb2d87897d4/src/domains/raster.jl#L53-L72">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BiodiversityObservationNetworks.getfeatures-Tuple{BiodiversityObservationNetwork}"><a class="docstring-binding" href="#BiodiversityObservationNetworks.getfeatures-Tuple{BiodiversityObservationNetwork}"><code>BiodiversityObservationNetworks.getfeatures</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">getfeatures</code></pre></div><a class="docs-sourcelink" target="_blank" href="github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/1c2f4b91f3ea1171eb97b2659b0bccb2d87897d4/src/domains/bon.jl#L34-L36">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BiodiversityObservationNetworks.getfeatures-Tuple{RasterDomain}"><a class="docstring-binding" href="#BiodiversityObservationNetworks.getfeatures-Tuple{RasterDomain}"><code>BiodiversityObservationNetworks.getfeatures</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">getfeatures(domain)</code></pre><p>Return a matrix of auxiliary variables (features) for valid pixels in the domain. Rows are features, columns are pixels.</p></div><a class="docs-sourcelink" target="_blank" href="github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/1c2f4b91f3ea1171eb97b2659b0bccb2d87897d4/src/domains/raster.jl#L42-L47">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BiodiversityObservationNetworks.getpool-Tuple{BiodiversityObservationNetwork}"><a class="docstring-binding" href="#BiodiversityObservationNetworks.getpool-Tuple{BiodiversityObservationNetwork}"><code>BiodiversityObservationNetworks.getpool</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">getpool</code></pre></div><a class="docs-sourcelink" target="_blank" href="github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/1c2f4b91f3ea1171eb97b2659b0bccb2d87897d4/src/domains/bon.jl#L29-L31">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BiodiversityObservationNetworks.getpool-Tuple{RasterDomain}"><a class="docstring-binding" href="#BiodiversityObservationNetworks.getpool-Tuple{RasterDomain}"><code>BiodiversityObservationNetworks.getpool</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">getpool(domain)</code></pre><p>Return the collection of valid (unmasked) indices for the given domain.</p></div><a class="docs-sourcelink" target="_blank" href="github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/1c2f4b91f3ea1171eb97b2659b0bccb2d87897d4/src/domains/raster.jl#L34-L38">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BiodiversityObservationNetworks.ismasked-Tuple{RasterDomain{&lt;:SimpleSDMLayers.SDMLayer}, Real, Real}"><a class="docstring-binding" href="#BiodiversityObservationNetworks.ismasked-Tuple{RasterDomain{&lt;:SimpleSDMLayers.SDMLayer}, Real, Real}"><code>BiodiversityObservationNetworks.ismasked</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">ismasked</code></pre></div><a class="docs-sourcelink" target="_blank" href="github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/1c2f4b91f3ea1171eb97b2659b0bccb2d87897d4/src/domains/raster.jl#L124-L126">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BiodiversityObservationNetworks.mask!-Tuple{Any, Nothing}"><a class="docstring-binding" href="#BiodiversityObservationNetworks.mask!-Tuple{Any, Nothing}"><code>BiodiversityObservationNetworks.mask!</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">mask!(domain, mask)</code></pre><p>Apply <code>mask</code> to <code>domain</code> in-place. Overloads handle <code>RasterDomain</code>s backed by <code>SDMLayer</code> or <code>Matrix</code>, and propagate to all rasters in a <code>RasterStack</code>. Polygon masks are supported for SDMLayer-backed rasters.</p></div><a class="docs-sourcelink" target="_blank" href="github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/1c2f4b91f3ea1171eb97b2659b0bccb2d87897d4/src/mask.jl#L88-L94">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BiodiversityObservationNetworks.normalize_inclusion!-Tuple{Any, RasterDomain{&lt;:SimpleSDMLayers.SDMLayer}}"><a class="docstring-binding" href="#BiodiversityObservationNetworks.normalize_inclusion!-Tuple{Any, RasterDomain{&lt;:SimpleSDMLayers.SDMLayer}}"><code>BiodiversityObservationNetworks.normalize_inclusion!</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">normalize_inclusion!(sampler, inclusion)</code></pre><p>Scale <code>inclusion</code> so that its total mass equals <code>sampler.num_nodes</code>. Overloads exist for SDMLayer-backed rasters, matrix-backed rasters, and vectors. Mutates <code>inclusion</code> in-place.</p></div><a class="docs-sourcelink" target="_blank" href="github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/1c2f4b91f3ea1171eb97b2659b0bccb2d87897d4/src/inclusion.jl#L66-L72">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BiodiversityObservationNetworks.rescale_node-Tuple{RasterDomain{&lt;:Matrix}, Real, Real}"><a class="docstring-binding" href="#BiodiversityObservationNetworks.rescale_node-Tuple{RasterDomain{&lt;:Matrix}, Real, Real}"><code>BiodiversityObservationNetworks.rescale_node</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">rescale_node</code></pre></div><a class="docs-sourcelink" target="_blank" href="github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/1c2f4b91f3ea1171eb97b2659b0bccb2d87897d4/src/domains/raster.jl#L109-L111">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BiodiversityObservationNetworks.tilt-Tuple{Any, Any}"><a class="docstring-binding" href="#BiodiversityObservationNetworks.tilt-Tuple{Any, Any}"><code>BiodiversityObservationNetworks.tilt</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">tilt(layer, α)</code></pre><p>Performs logistic-exponential tilting on the on a layer with scaling factor α.  This is useful for adjusting inclusion probabilities to scale more toward  (α &gt; 1) or away from (α &lt; 1) extreme values. </p></div><a class="docs-sourcelink" target="_blank" href="github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/1c2f4b91f3ea1171eb97b2659b0bccb2d87897d4/src/utilities/tilting.jl#L1-L7">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BiodiversityObservationNetworks.to_domain-Tuple{SimpleSDMLayers.SDMLayer}"><a class="docstring-binding" href="#BiodiversityObservationNetworks.to_domain-Tuple{SimpleSDMLayers.SDMLayer}"><code>BiodiversityObservationNetworks.to_domain</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">to_domain(x; kwargs...)</code></pre><p>Coerce an input object into a valid internal domain representation (e.g., <code>RasterDomain</code>,  <code>RasterStack</code>).</p><p><strong>Arguments</strong></p><ul><li><code>x</code>: The input object to convert. Can be a Matrix, SDMLayer, Vector of layers,  Polygon, or an existing domain/network.</li><li><code>kwargs...</code>: Helper arguments for specific conversions (see below).</li></ul><p><strong>Methods</strong></p><ul><li><p><strong>1. Matrices and SDMLayers</strong>: Wraps the input in a RasterDomain. For SDMLayer inputs, the existing valid indices (non-NaN/masked) are preserved in the pool.</p><ul><li><code>to_domain(mat::AbstractMatrix)</code> -&gt; <code>RasterDomain</code></li><li><code>to_domain(layer::SDMLayer)</code> -&gt; <code>RasterDomain</code></li></ul></li><li><p><strong>2. Collections of layers (Stacks)</strong>: Converts a vector of inputs into a RasterStack. The sampling pool is aggregated as the intersection of valid pixels across all layers.</p><ul><li><code>to_domain(layers::Vector{&lt;:SDMLayer})</code> -&gt; <code>RasterStack</code></li><li><code>to_domain(mats::Vector{&lt;:AbstractMatrix})</code> -&gt; <code>RasterStack</code></li></ul></li><li><p><strong>3. Polygons (Rasterization)</strong>: Converts a vector geometry (Polygon) into a binary RasterDomain by rasterizing it.</p><ul><li><code>to_domain(poly::SimpleSDMPolygons.AbstractGeometry; grid_size=(100,100))</code> -&gt; <code>RasterDomain</code></li><li><code>to_domain(poly::PolygonDomain; grid_size=(100,100))</code> -&gt; <code>RasterDomain</code></li></ul></li><li><p><strong>4. Identity</strong>: Returns the input unchanged if it is already a valid domain or network type.</p><ul><li><code>to_domain(rd::RasterDomain)</code> -&gt; <code>RasterDomain</code></li><li><code>to_domain(rs::RasterStack)</code> -&gt; <code>RasterStack</code></li><li><code>to_domain(bon::BiodiversityObservationNetwork)</code> -&gt; <code>BiodiversityObservationNetwork</code></li></ul></li></ul></div><a class="docs-sourcelink" target="_blank" href="github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/1c2f4b91f3ea1171eb97b2659b0bccb2d87897d4/src/domains/conversion.jl#L1-L31">source</a></section></details></article><article><details class="docstring" open="true"><summary id="BiodiversityObservationNetworks.unique_permutations-Union{Tuple{T}, Tuple{T, Any}} where T"><a class="docstring-binding" href="#BiodiversityObservationNetworks.unique_permutations-Union{Tuple{T}, Tuple{T, Any}} where T"><code>BiodiversityObservationNetworks.unique_permutations</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">unique_permutations(x::T, prefix = T()) where {T}</code></pre><p>Generate all unique permutations for a multiset <code>x</code> without repetition of duplicates. Based on StackOverflow (<code>https://stackoverflow.com/questions/65051953/julia-generate-all-non-repeating-permutations-in-set-with-duplicates</code>).</p></div><a class="docs-sourcelink" target="_blank" href="github.com/PoisotLab/BiodiversityObservationNetworks.jl/blob/1c2f4b91f3ea1171eb97b2659b0bccb2d87897d4/src/samplers/cubesampling.jl#L291-L297">source</a></section></details></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Reference</a><a class="docs-footer-nextpage" href="../samplers/">Samplers »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.16.1 on <span class="colophon-date" title="Sunday 7 December 2025 17:52">Sunday 7 December 2025</span>. Using Julia version 1.12.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
